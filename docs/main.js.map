{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/card/card.component.css","webpack:///./src/app/card/card.component.html","webpack:///./src/app/card/card.component.ts","webpack:///./src/app/chatComponents/chat-form/chat-form.component.css","webpack:///./src/app/chatComponents/chat-form/chat-form.component.html","webpack:///./src/app/chatComponents/chat-form/chat-form.component.ts","webpack:///./src/app/chatComponents/chat-header/chat-header.component.css","webpack:///./src/app/chatComponents/chat-header/chat-header.component.html","webpack:///./src/app/chatComponents/chat-header/chat-header.component.ts","webpack:///./src/app/chatComponents/chatroom/chatroom.component.css","webpack:///./src/app/chatComponents/chatroom/chatroom.component.html","webpack:///./src/app/chatComponents/chatroom/chatroom.component.ts","webpack:///./src/app/chatComponents/feed/feed.component.css","webpack:///./src/app/chatComponents/feed/feed.component.html","webpack:///./src/app/chatComponents/feed/feed.component.ts","webpack:///./src/app/chatComponents/message/message.component.css","webpack:///./src/app/chatComponents/message/message.component.html","webpack:///./src/app/chatComponents/message/message.component.ts","webpack:///./src/app/chatComponents/multimedia-display/multimedia-display.component.css","webpack:///./src/app/chatComponents/multimedia-display/multimedia-display.component.html","webpack:///./src/app/chatComponents/multimedia-display/multimedia-display.component.ts","webpack:///./src/app/dashboard/dashboard.component.css","webpack:///./src/app/dashboard/dashboard.component.html","webpack:///./src/app/dashboard/dashboard.component.ts","webpack:///./src/app/dialogComponents/new-chat-dialog/new-chat-dialog.component.css","webpack:///./src/app/dialogComponents/new-chat-dialog/new-chat-dialog.component.html","webpack:///./src/app/dialogComponents/new-chat-dialog/new-chat-dialog.component.ts","webpack:///./src/app/login-popup/login-popup.component.css","webpack:///./src/app/login-popup/login-popup.component.html","webpack:///./src/app/login-popup/login-popup.component.ts","webpack:///./src/app/login/login.component.css","webpack:///./src/app/login/login.component.html","webpack:///./src/app/login/login.component.ts","webpack:///./src/app/main-content/main-content.component.css","webpack:///./src/app/main-content/main-content.component.html","webpack:///./src/app/main-content/main-content.component.ts","webpack:///./src/app/models/dechat/chat-info.model.ts","webpack:///./src/app/models/dechat/chat-message.model.ts","webpack:///./src/app/models/dechat/chat.model.ts","webpack:///./src/app/models/dechat/inbox-element.model.ts","webpack:///./src/app/models/dechat/message-bundle.model.ts","webpack:///./src/app/models/dechat/multimedia.model.ts","webpack:///./src/app/models/dechat/user.model.ts","webpack:///./src/app/navbar/navbar.component.css","webpack:///./src/app/navbar/navbar.component.html","webpack:///./src/app/navbar/navbar.component.ts","webpack:///./src/app/register/register.component.css","webpack:///./src/app/register/register.component.html","webpack:///./src/app/register/register.component.ts","webpack:///./src/app/services/dechat/chat.service.ts","webpack:///./src/app/services/dechat/files.service.ts","webpack:///./src/app/services/dechat/inbox.service.ts","webpack:///./src/app/services/dechat/message.service.ts","webpack:///./src/app/services/dechat/user.service.ts","webpack:///./src/app/services/solid/auth.guard.service.ts","webpack:///./src/app/services/solid/rdf.service.ts","webpack:///./src/app/services/solid/solid.auth.service.ts","webpack:///./src/app/sidebarComponents/chat-item/chat-item.component.css","webpack:///./src/app/sidebarComponents/chat-item/chat-item.component.html","webpack:///./src/app/sidebarComponents/chat-item/chat-item.component.ts","webpack:///./src/app/sidebarComponents/chat-list/chat-list.component.css","webpack:///./src/app/sidebarComponents/chat-list/chat-list.component.html","webpack:///./src/app/sidebarComponents/chat-list/chat-list.component.ts","webpack:///./src/app/utilComponents/profile-icon/profile-icon.component.css","webpack:///./src/app/utilComponents/profile-icon/profile-icon.component.html","webpack:///./src/app/utilComponents/profile-icon/profile-icon.component.ts","webpack:///./src/app/utilComponents/user-display-slot/user-display-slot.component.css","webpack:///./src/app/utilComponents/user-display-slot/user-display-slot.component.html","webpack:///./src/app/utilComponents/user-display-slot/user-display-slot.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \":host {\\r\\n    position: absolute;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n    bottom: 0;\\r\\n    top: 0;\\r\\n}\\r\\n\\r\\n.navWrapper {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    color: #222;\\r\\n    box-shadow: 0 2px 3px rgba(0, 0, 0, .37), 1px 2px 3px rgba(0, 0, 0, .54);\\r\\n    z-index: 2; /* for it to be on top of some other elements */\\r\\n}\\r\\n\\r\\n.application {\\r\\n    height: 100%;\\r\\n    display: grid;\\r\\n    grid-template-rows: 15% 0 85%;\\r\\n}\\r\\n\\r\\n/* we don't want the router-outlet to be rendered! */\\r\\n\\r\\nrouter-outlet {\\r\\n    height: 0;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxrQkFBa0I7SUFDbEIsT0FBTztJQUNQLFFBQVE7SUFDUixTQUFTO0lBQ1QsTUFBTTtBQUNWOztBQUVBO0lBQ0ksV0FBVztJQUNYLFlBQVk7SUFDWixXQUFXO0lBQ1gsd0VBQXdFO0lBQ3hFLFVBQVUsRUFBRSwrQ0FBK0M7QUFDL0Q7O0FBRUE7SUFDSSxZQUFZO0lBQ1osYUFBYTtJQUNiLDZCQUE2QjtBQUNqQzs7QUFFQSxvREFBb0Q7O0FBQ3BEO0lBQ0ksU0FBUztBQUNiIiwiZmlsZSI6InNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgcmlnaHQ6IDA7XHJcbiAgICBib3R0b206IDA7XHJcbiAgICB0b3A6IDA7XHJcbn1cclxuXHJcbi5uYXZXcmFwcGVyIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgY29sb3I6ICMyMjI7XHJcbiAgICBib3gtc2hhZG93OiAwIDJweCAzcHggcmdiYSgwLCAwLCAwLCAuMzcpLCAxcHggMnB4IDNweCByZ2JhKDAsIDAsIDAsIC41NCk7XHJcbiAgICB6LWluZGV4OiAyOyAvKiBmb3IgaXQgdG8gYmUgb24gdG9wIG9mIHNvbWUgb3RoZXIgZWxlbWVudHMgKi9cclxufVxyXG5cclxuLmFwcGxpY2F0aW9uIHtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIGRpc3BsYXk6IGdyaWQ7XHJcbiAgICBncmlkLXRlbXBsYXRlLXJvd3M6IDE1JSAwIDg1JTtcclxufVxyXG5cclxuLyogd2UgZG9uJ3Qgd2FudCB0aGUgcm91dGVyLW91dGxldCB0byBiZSByZW5kZXJlZCEgKi9cclxucm91dGVyLW91dGxldCB7XHJcbiAgICBoZWlnaHQ6IDA7XHJcbn1cclxuIl19 */\"","module.exports = \"<div class=\\\"application\\\">\\r\\n    <div class=\\\"navWrapper\\\">\\r\\n        <app-navbar></app-navbar>\\r\\n    </div>\\r\\n    <router-outlet></router-outlet>\\r\\n</div>\"","import {Component} from '@angular/core';\r\nimport {popupLogin} from 'solid-auth-client/dist-lib/solid-auth-client.bundle.js';\r\n\r\n@Component({\r\n    selector: 'app-root',\r\n    templateUrl: './app.component.html',\r\n    styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n    title = 'DeChat';\r\n}\r\n","\r\n// Modules\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ToastrModule } from 'ngx-toastr';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { NgSelectModule } from '@ng-select/ng-select';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\n\r\n\r\n// Components\r\nimport { AppComponent } from './app.component';\r\nimport {LoginPopupComponent} from './login-popup/login-popup.component';\r\nimport {LoginComponent} from './login/login.component';\r\nimport { CardComponent } from './card/card.component';\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { RegisterComponent } from './register/register.component';\r\n\r\nimport { ChatFormComponent } from './chatComponents/chat-form/chat-form.component';\r\nimport { ChatroomComponent } from './chatComponents/chatroom/chatroom.component';\r\nimport { FeedComponent } from './chatComponents/feed/feed.component';\r\nimport { MessageComponent } from './chatComponents/message/message.component';\r\nimport { NavbarComponent } from './navbar/navbar.component';\r\n\r\nimport { ChatListComponent } from './sidebarComponents/chat-list/chat-list.component';\r\nimport { ChatItemComponent } from './sidebarComponents/chat-item/chat-item.component';\r\n\r\nimport { MainContentComponent } from './main-content/main-content.component';\r\nimport { ChatHeaderComponent } from './chatComponents/chat-header/chat-header.component';\r\n\r\n\r\n\r\n// Services\r\nimport { AuthService } from './services/solid/solid.auth.service';\r\nimport { AuthGuard } from './services/solid/auth.guard.service';\r\nimport { ChatService } from './services/dechat/chat.service';\r\n\r\n\r\n\r\n// Miscelanea\r\nimport { ProfileIconComponent } from './utilComponents/profile-icon/profile-icon.component';\r\nimport { MultimediaDisplayComponent } from './chatComponents/multimedia-display/multimedia-display.component';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NewChatDialogComponent } from './dialogComponents/new-chat-dialog/new-chat-dialog.component';\r\nimport { MatDialogModule } from '@angular/material';\r\nimport { UserDisplaySlotComponent } from './utilComponents/user-display-slot/user-display-slot.component';\r\n\r\n\r\nconst appRoutes: Routes = [\r\n  { path: 'login', component: LoginComponent },\r\n  { path: '', redirectTo: '/login', pathMatch: 'full' },\r\n\r\n  { path: 'login-popup', component: LoginPopupComponent },\r\n\r\n  {\r\n    path: 'dashboard', component: DashboardComponent,\r\n    canActivate: [AuthGuard],\r\n  },\r\n  {\r\n    path: 'card', component: CardComponent,\r\n    canActivate: [AuthGuard],\r\n  },\r\n\r\n  { \r\n    path: 'chat', component: MainContentComponent,\r\n    canActivate: [AuthGuard],\r\n  }\r\n];\r\n\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    LoginComponent,\r\n    LoginPopupComponent,\r\n    DashboardComponent,\r\n    CardComponent,\r\n    RegisterComponent,\r\n    ChatFormComponent,\r\n    ChatroomComponent,\r\n    FeedComponent,\r\n    MessageComponent,\r\n    NavbarComponent,\r\n    ChatListComponent,\r\n    ChatItemComponent,\r\n    MainContentComponent,\r\n    ChatHeaderComponent,\r\n    ProfileIconComponent,\r\n    MultimediaDisplayComponent,\r\n    NewChatDialogComponent,\r\n    UserDisplaySlotComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    RouterModule.forRoot(appRoutes),\r\n    NgSelectModule,\r\n    ToastrModule.forRoot(),\r\n    BrowserAnimationsModule, //required for toastr\r\n    MatDialogModule\r\n  ],\r\n  entryComponents: [\r\n    NewChatDialogComponent\r\n  ],\r\n  providers: [AuthService, ChatService],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","module.exports = \".profile-container {\\r\\n  font-family: 'Roboto', sans-serif;\\r\\n}\\r\\n\\r\\n.profile-container h1 {\\r\\n  font-size: 24px;\\r\\n  color: #7C55FB;\\r\\n  font-weight: bold;\\r\\n  line-height: 32px;\\r\\n  letter-spacing: 1.2px;\\r\\n  text-align: center;\\r\\n  margin-top: 82px;\\r\\n  text-transform: uppercase;\\r\\n}\\r\\n\\r\\n.profile-fields-container {\\r\\n  max-width: 740px;\\r\\n  min-height: 500px;\\r\\n  margin: 0 auto;\\r\\n  border: 1px solid #ccc;\\r\\n  box-shadow: #ccc 1px 1px 4px;\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.profile-fields-container .profile-image-container {\\r\\n  height: 200px;\\r\\n  width: 100%;\\r\\n  background-size: cover !important;\\r\\n  background: url('/dechat_en1a/assets/images/Solid_Pattern.png');\\r\\n}\\r\\n\\r\\n.profile-fields-container .profile-image-container img {\\r\\n  height: 128px;\\r\\n  border-radius: 50%;\\r\\n  margin-left: auto;\\r\\n  margin-right:auto;\\r\\n  position: relative;\\r\\n  top:40px;\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.profile-fields-container i {\\r\\n  font-size: 14px;\\r\\n  color: #89969F;\\r\\n  padding-left: 26px;\\r\\n  padding-right: 10px;\\r\\n  margin-top: 24px;\\r\\n}\\r\\n\\r\\n.profile-fields-container input[type=text].field-text {\\r\\n  height: 12px;\\r\\n  width: 280px;\\r\\n  border: 1px solid #89969F;\\r\\n  border-radius: 4px;\\r\\n  padding: 10px;\\r\\n}\\r\\n\\r\\n.profile-fields-container input[type=text].field-text::-webkit-input-placeholder {\\r\\n  color: rgba(102,102,102,0.2);\\r\\n}\\r\\n\\r\\n.profile-fields-container input[type=text].field-text:-ms-input-placeholder {\\r\\n  color: rgba(102,102,102,0.2);\\r\\n}\\r\\n\\r\\n.profile-fields-container input[type=text].field-text::-ms-input-placeholder {\\r\\n  color: rgba(102,102,102,0.2);\\r\\n}\\r\\n\\r\\n.profile-fields-container input[type=text].field-text::placeholder {\\r\\n  color: rgba(102,102,102,0.2);\\r\\n}\\r\\n\\r\\n.profile-save-button-container {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  margin-bottom: auto;\\r\\n  height: 100px;\\r\\n  flex-direction: column;\\r\\n  justify-content: flex-end;\\r\\n}\\r\\n\\r\\n.profile-save-button {\\r\\n  background-color: #7C55FB;\\r\\n  margin-left: auto;\\r\\n  margin-right: auto;\\r\\n  width: 280px;\\r\\n}\\r\\n\\r\\n.profile-save-button:disabled {\\r\\n  background-color: #F0EEEB;\\r\\n  border-color: #F0EEEB;\\r\\n  cursor: not-allowed;\\r\\n}\\r\\n\\r\\n.topnav {\\r\\n  position:absolute;\\r\\n  top:0;\\r\\n  left:0;\\r\\n  width: 100%;\\r\\n  background-color: #7C4DFF;\\r\\n  height: 50px;\\r\\n  color: #fff;\\r\\n}\\r\\n\\r\\n.topnav .logo {\\r\\n  display: inline-block;\\r\\n  font-family: 'Roboto Slab', serif;\\r\\n  font-size: 24px;\\r\\n  font-weight: bold;\\r\\n  text-transform: uppercase;\\r\\n  line-height: 32px;\\r\\n  padding-right: 80px;\\r\\n  position: relative;\\r\\n  top: -8px;\\r\\n  left: 28px;\\r\\n}\\r\\n\\r\\n.topnav .menu-item {\\r\\n  display: inline-block;\\r\\n  font-size: 10px;\\r\\n  line-height: 13px;\\r\\n  width: 100px;\\r\\n  height: 100%;\\r\\n  text-align: center;\\r\\n}\\r\\n\\r\\n.topnav .menu-item i {\\r\\n  font-size: 24px;\\r\\n  margin-top:8px;\\r\\n  margin-bottom: 2px;\\r\\n}\\r\\n\\r\\n.topnav .profile-menu {\\r\\n  float: right;\\r\\n  display: inline-block;\\r\\n  width: 50px;\\r\\n  height: 50px;\\r\\n  background-color: rgba(0,0,0,0.25);\\r\\n}\\r\\n\\r\\n.topnav .profile-menu img {\\r\\n  display: block;\\r\\n  height: 30px;\\r\\n  width: 30px;\\r\\n  border-radius: 50%;\\r\\n  margin: 0 auto;\\r\\n  margin-top:10px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.loading-image {\\r\\n  text-align: center;\\r\\n  margin-top: 50px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2FyZC9jYXJkLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxpQ0FBaUM7QUFDbkM7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsY0FBYztFQUNkLGlCQUFpQjtFQUNqQixpQkFBaUI7RUFDakIscUJBQXFCO0VBQ3JCLGtCQUFrQjtFQUNsQixnQkFBZ0I7RUFDaEIseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtFQUNqQixjQUFjO0VBQ2Qsc0JBQXNCO0VBQ3RCLDRCQUE0QjtFQUM1QixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsV0FBVztFQUNYLGlDQUFpQztFQUNqQywrREFBbUQ7QUFDckQ7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLGlCQUFpQjtFQUNqQixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixZQUFZO0VBQ1oseUJBQXlCO0VBQ3pCLGtCQUFrQjtFQUNsQixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSw0QkFBNEI7QUFDOUI7O0FBRkE7RUFDRSw0QkFBNEI7QUFDOUI7O0FBRkE7RUFDRSw0QkFBNEI7QUFDOUI7O0FBRkE7RUFDRSw0QkFBNEI7QUFDOUI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLG1CQUFtQjtFQUNuQixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLHlCQUF5QjtBQUMzQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLFlBQVk7QUFDZDs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixxQkFBcUI7RUFDckIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLEtBQUs7RUFDTCxNQUFNO0VBQ04sV0FBVztFQUNYLHlCQUF5QjtFQUN6QixZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGlDQUFpQztFQUNqQyxlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLHlCQUF5QjtFQUN6QixpQkFBaUI7RUFDakIsbUJBQW1CO0VBQ25CLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsVUFBVTtBQUNaOztBQUVBO0VBQ0UscUJBQXFCO0VBQ3JCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsWUFBWTtFQUNaLFlBQVk7RUFDWixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsY0FBYztFQUNkLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixxQkFBcUI7RUFDckIsV0FBVztFQUNYLFlBQVk7RUFDWixrQ0FBa0M7QUFDcEM7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsWUFBWTtFQUNaLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsY0FBYztFQUNkLGVBQWU7RUFDZixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGdCQUFnQjtBQUNsQiIsImZpbGUiOiJzcmMvYXBwL2NhcmQvY2FyZC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByb2ZpbGUtY29udGFpbmVyIHtcclxuICBmb250LWZhbWlseTogJ1JvYm90bycsIHNhbnMtc2VyaWY7XHJcbn1cclxuXHJcbi5wcm9maWxlLWNvbnRhaW5lciBoMSB7XHJcbiAgZm9udC1zaXplOiAyNHB4O1xyXG4gIGNvbG9yOiAjN0M1NUZCO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIGxpbmUtaGVpZ2h0OiAzMnB4O1xyXG4gIGxldHRlci1zcGFjaW5nOiAxLjJweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgbWFyZ2luLXRvcDogODJweDtcclxuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xyXG59XHJcblxyXG4ucHJvZmlsZS1maWVsZHMtY29udGFpbmVyIHtcclxuICBtYXgtd2lkdGg6IDc0MHB4O1xyXG4gIG1pbi1oZWlnaHQ6IDUwMHB4O1xyXG4gIG1hcmdpbjogMCBhdXRvO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgYm94LXNoYWRvdzogI2NjYyAxcHggMXB4IDRweDtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbn1cclxuXHJcbi5wcm9maWxlLWZpZWxkcy1jb250YWluZXIgLnByb2ZpbGUtaW1hZ2UtY29udGFpbmVyIHtcclxuICBoZWlnaHQ6IDIwMHB4O1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJhY2tncm91bmQtc2l6ZTogY292ZXIgIWltcG9ydGFudDtcclxuICBiYWNrZ3JvdW5kOiB1cmwoJy9hc3NldHMvaW1hZ2VzL1NvbGlkX1BhdHRlcm4ucG5nJyk7XHJcbn1cclxuXHJcbi5wcm9maWxlLWZpZWxkcy1jb250YWluZXIgLnByb2ZpbGUtaW1hZ2UtY29udGFpbmVyIGltZyB7XHJcbiAgaGVpZ2h0OiAxMjhweDtcclxuICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgbWFyZ2luLXJpZ2h0OmF1dG87XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gIHRvcDo0MHB4O1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcblxyXG4ucHJvZmlsZS1maWVsZHMtY29udGFpbmVyIGkge1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBjb2xvcjogIzg5OTY5RjtcclxuICBwYWRkaW5nLWxlZnQ6IDI2cHg7XHJcbiAgcGFkZGluZy1yaWdodDogMTBweDtcclxuICBtYXJnaW4tdG9wOiAyNHB4O1xyXG59XHJcblxyXG4ucHJvZmlsZS1maWVsZHMtY29udGFpbmVyIGlucHV0W3R5cGU9dGV4dF0uZmllbGQtdGV4dCB7XHJcbiAgaGVpZ2h0OiAxMnB4O1xyXG4gIHdpZHRoOiAyODBweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjODk5NjlGO1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG59XHJcblxyXG4ucHJvZmlsZS1maWVsZHMtY29udGFpbmVyIGlucHV0W3R5cGU9dGV4dF0uZmllbGQtdGV4dDo6cGxhY2Vob2xkZXIge1xyXG4gIGNvbG9yOiByZ2JhKDEwMiwxMDIsMTAyLDAuMik7XHJcbn1cclxuXHJcbi5wcm9maWxlLXNhdmUtYnV0dG9uLWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIG1hcmdpbi1ib3R0b206IGF1dG87XHJcbiAgaGVpZ2h0OiAxMDBweDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XHJcbn1cclxuXHJcbi5wcm9maWxlLXNhdmUtYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjN0M1NUZCO1xyXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gIG1hcmdpbi1yaWdodDogYXV0bztcclxuICB3aWR0aDogMjgwcHg7XHJcbn1cclxuXHJcbi5wcm9maWxlLXNhdmUtYnV0dG9uOmRpc2FibGVkIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjBFRUVCO1xyXG4gIGJvcmRlci1jb2xvcjogI0YwRUVFQjtcclxuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG59XHJcblxyXG4udG9wbmF2IHtcclxuICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICB0b3A6MDtcclxuICBsZWZ0OjA7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzdDNERGRjtcclxuICBoZWlnaHQ6IDUwcHg7XHJcbiAgY29sb3I6ICNmZmY7XHJcbn1cclxuXHJcbi50b3BuYXYgLmxvZ28ge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICBmb250LWZhbWlseTogJ1JvYm90byBTbGFiJywgc2VyaWY7XHJcbiAgZm9udC1zaXplOiAyNHB4O1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XHJcbiAgbGluZS1oZWlnaHQ6IDMycHg7XHJcbiAgcGFkZGluZy1yaWdodDogODBweDtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgdG9wOiAtOHB4O1xyXG4gIGxlZnQ6IDI4cHg7XHJcbn1cclxuXHJcbi50b3BuYXYgLm1lbnUtaXRlbSB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIGZvbnQtc2l6ZTogMTBweDtcclxuICBsaW5lLWhlaWdodDogMTNweDtcclxuICB3aWR0aDogMTAwcHg7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLnRvcG5hdiAubWVudS1pdGVtIGkge1xyXG4gIGZvbnQtc2l6ZTogMjRweDtcclxuICBtYXJnaW4tdG9wOjhweDtcclxuICBtYXJnaW4tYm90dG9tOiAycHg7XHJcbn1cclxuXHJcbi50b3BuYXYgLnByb2ZpbGUtbWVudSB7XHJcbiAgZmxvYXQ6IHJpZ2h0O1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB3aWR0aDogNTBweDtcclxuICBoZWlnaHQ6IDUwcHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjI1KTtcclxufVxyXG5cclxuLnRvcG5hdiAucHJvZmlsZS1tZW51IGltZyB7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgaGVpZ2h0OiAzMHB4O1xyXG4gIHdpZHRoOiAzMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBtYXJnaW46IDAgYXV0bztcclxuICBtYXJnaW4tdG9wOjEwcHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4ubG9hZGluZy1pbWFnZSB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbi10b3A6IDUwcHg7XHJcbn1cclxuIl19 */\"","module.exports = \"<div class=\\\"profile-container\\\">\\r\\n  <!-- EXAMPLE TOP NAV -->\\r\\n  <div class=\\\"topnav\\\">\\r\\n    <div class=\\\"logo\\\">Solid</div>\\r\\n    <div class=\\\"menu-item\\\">\\r\\n      <div>\\r\\n        <i class=\\\"far fa-compass\\\"></i>\\r\\n      </div>\\r\\n      Menu Item 1\\r\\n    </div>\\r\\n    <div class=\\\"menu-item\\\">\\r\\n      <div>\\r\\n        <i class=\\\"far fa-comment\\\"></i>\\r\\n      </div>\\r\\n      Menu Item 2\\r\\n    </div>\\r\\n    <div class=\\\"menu-item\\\">\\r\\n      <div>\\r\\n        <i class=\\\"fas fa-sliders-h\\\"></i>\\r\\n      </div>\\r\\n      Menu Item 3\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"profile-menu\\\" (click)=\\\"logout()\\\">\\r\\n      <img [src]=\\\"profileImage\\\" />\\r\\n    </div>\\r\\n  </div>\\r\\n  <h1>Profile</h1>\\r\\n\\r\\n  <!-- LOADING IMAGE -->\\r\\n  <div class=\\\"loading-image\\\" *ngIf=\\\"loadingProfile\\\">\\r\\n    <i class=\\\"fas fa-circle-notch fa-4x fa-spin\\\"></i>\\r\\n  </div>\\r\\n\\r\\n  <!-- MAIN PROFILE -->\\r\\n  <div class=\\\"profile-fields-container\\\" *ngIf=\\\"!loadingProfile\\\">\\r\\n    <div class=\\\"profile-image-container\\\">\\r\\n      <img [src]=\\\"profileImage\\\" />\\r\\n    </div>\\r\\n    <form style=\\\"padding-top: 26px;\\\" #f=\\\"ngForm\\\" (submit)=\\\"onSubmit()\\\">\\r\\n      <div class=\\\"fields pure-g\\\">\\r\\n        <!-- NAME -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-user\\\"></i> <input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"fn\\\" placeholder=\\\"NAME\\\" [(ngModel)]=\\\"profile.fn\\\" />\\r\\n        </div>\\r\\n\\r\\n        <!-- PHONE -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-phone\\\"></i><input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"phone\\\" placeholder=\\\"PHONE\\\" [(ngModel)]=\\\"profile.phone\\\" />\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"fields pure-g\\\">\\r\\n        <!-- ROLE -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-user-astronaut\\\"></i> <input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"role\\\" placeholder=\\\"ROLE\\\" [(ngModel)]=\\\"profile.role\\\" />\\r\\n        </div>\\r\\n\\r\\n        <!-- EMAIL -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-envelope\\\"></i><input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"email\\\" placeholder=\\\"EMAIL\\\" [(ngModel)]=\\\"profile.email\\\" />\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"fields pure-g\\\">\\r\\n        <!-- ORGANIZATION -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-building\\\"></i> <input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"company\\\" placeholder=\\\"ORGANIZATION\\\" [(ngModel)]=\\\"profile.company\\\" />\\r\\n        </div>\\r\\n\\r\\n        <!-- ADDRESS -->\\r\\n        <div class=\\\"pure-u-1-1 pure-u-md-1-2 form-group\\\">\\r\\n          <i class=\\\"fas fa-map-marker-alt\\\" style=\\\"width: 12px; margin-left: 2px;\\\"></i><input type=\\\"text\\\" class=\\\"field-text form-control\\\" name=\\\"address\\\" placeholder=\\\"ADDRESS\\\" [(ngModel)]=\\\"profile.address.street\\\" />\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"profile-save-button-container\\\">\\r\\n        <button type=\\\"submit\\\" class=\\\"wide-button profile-save-button\\\" [disabled]=\\\"!cardForm || cardForm.pristine\\\">Save</button>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\\r\\n\"","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {NgForm} from '@angular/forms';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {SolidProfile} from '../models/solid/solid-profile.model';\r\nimport {RdfService} from '../services/solid/rdf.service';\r\nimport {AuthService} from '../services/solid/solid.auth.service';\r\n\r\n@Component({\r\n    selector: 'app-card',\r\n    templateUrl: './card.component.html',\r\n    styleUrls: ['./card.component.css'],\r\n})\r\nexport class CardComponent implements OnInit {\r\n\r\n    profile: SolidProfile;\r\n    profileImage: string;\r\n    loadingProfile: boolean;\r\n\r\n    @ViewChild('f') cardForm: NgForm;\r\n\r\n    constructor(private rdf: RdfService,\r\n                private route: ActivatedRoute, private auth: AuthService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.loadingProfile = true;\r\n        this.loadProfile();\r\n\r\n        // Clear cached profile data\r\n        // TODO: Remove this code and find a better way to get the old data\r\n        localStorage.removeItem('oldProfileData');\r\n    }\r\n\r\n    // Loads the profile from the rdf service and handles the response\r\n    async loadProfile() {\r\n        try {\r\n            this.loadingProfile = true;\r\n            const profile = await this.rdf.getProfile();\r\n            if (profile) {\r\n                this.profile = profile;\r\n                this.auth.saveOldUserData(profile);\r\n            }\r\n\r\n            this.loadingProfile = false;\r\n            this.setupProfileData();\r\n        } catch (error) {\r\n            console.log(`Error: ${error}`);\r\n        }\r\n\r\n    }\r\n\r\n    // Submits the form, and saves the profile data using the auth/rdf service\r\n    async onSubmit() {\r\n        if (!this.cardForm.invalid) {\r\n            try {\r\n                await this.rdf.updateProfile(this.cardForm);\r\n                localStorage.setItem('oldProfileData', JSON.stringify(this.profile));\r\n            } catch (err) {\r\n                console.log(`Error: ${err}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Format data coming back from server. Intended purpose is to replace profile image with default if it's missing\r\n    // and potentially format the address if we need to reformat it for this UI\r\n    private setupProfileData() {\r\n        if (this.profile) {\r\n            this.profileImage = this.profile.image ? this.profile.image : '/assets/images/profile.png';\r\n        } else {\r\n            this.profileImage = '/assets/images/profile.png';\r\n        }\r\n    }\r\n\r\n    // Example of logout functionality. Normally wouldn't be triggered by clicking the profile picture.\r\n    logout() {\r\n        this.auth.solidSignOut();\r\n    }\r\n}\r\n","module.exports = \"\\r\\n\\r\\n/* * * * * 'SEND' BUTTON * * * * */\\r\\n\\r\\n.chatButton {\\r\\n    flex: 1;\\r\\n    border-radius: 8px;\\r\\n    padding: 8px 24px;\\r\\n    font-size: 1em;\\r\\n    background-color: #2A2845;    \\r\\n    color: #fff;\\r\\n    transition: 0.2s ease-out;\\r\\n    min-width: 50px;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.chatButton:disabled {\\r\\n    background-color: #F0EEEB;\\r\\n    border-color: #F0EEEB;\\r\\n}\\r\\n\\r\\n.chatButton:hover {\\r\\n    background-color: #444;\\r\\n}\\r\\n\\r\\n/* * * * * CHAT TEXT INPUT * * * * */\\r\\n\\r\\n.inputWrapper {\\r\\n    flex: 5;\\r\\n    padding-left: 80px;\\r\\n    padding-right: 16px;\\r\\n    display: flex;\\r\\n}\\r\\n\\r\\n.chatInput { \\r\\n    flex: 1; \\r\\n    width: auto;\\r\\n    border-radius: 8px;\\r\\n    background-color: white;\\r\\n    font-size: 1.3em;\\r\\n    color: black;   \\r\\n    background-color: white;\\r\\n    transition: 0.1s ease-out; \\r\\n    padding-left: 16px;\\r\\n    width: 100%; \\r\\n    box-sizing: border-box;\\r\\n}\\r\\n\\r\\n.chatInput:focus {\\r\\n    background-color: rgb(238, 242, 247);\\r\\n    color: #222;\\r\\n    transition: 0.1s ease-in;\\r\\n}\\r\\n  \\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2hhdENvbXBvbmVudHMvY2hhdC1mb3JtL2NoYXQtZm9ybS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsa0NBQWtDOztBQUVsQztJQUNJLE9BQU87SUFDUCxrQkFBa0I7SUFDbEIsaUJBQWlCO0lBQ2pCLGNBQWM7SUFDZCx5QkFBeUI7SUFDekIsV0FBVztJQUNYLHlCQUF5QjtJQUN6QixlQUFlO0lBQ2Ysa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0kseUJBQXlCO0lBQ3pCLHFCQUFxQjtBQUN6Qjs7QUFHQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFJQSxvQ0FBb0M7O0FBRXBDO0lBQ0ksT0FBTztJQUNQLGtCQUFrQjtJQUNsQixtQkFBbUI7SUFDbkIsYUFBYTtBQUNqQjs7QUFFQTtJQUNJLE9BQU87SUFDUCxXQUFXO0lBQ1gsa0JBQWtCO0lBQ2xCLHVCQUF1QjtJQUN2QixnQkFBZ0I7SUFDaEIsWUFBWTtJQUNaLHVCQUF1QjtJQUN2Qix5QkFBeUI7SUFDekIsa0JBQWtCO0lBQ2xCLFdBQVc7SUFDWCxzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxvQ0FBb0M7SUFDcEMsV0FBVztJQUNYLHdCQUF3QjtBQUM1QiIsImZpbGUiOiJzcmMvYXBwL2NoYXRDb21wb25lbnRzL2NoYXQtZm9ybS9jaGF0LWZvcm0uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuLyogKiAqICogKiAnU0VORCcgQlVUVE9OICogKiAqICogKi9cclxuXHJcbi5jaGF0QnV0dG9uIHtcclxuICAgIGZsZXg6IDE7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICBwYWRkaW5nOiA4cHggMjRweDtcclxuICAgIGZvbnQtc2l6ZTogMWVtO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzJBMjg0NTsgICAgXHJcbiAgICBjb2xvcjogI2ZmZjtcclxuICAgIHRyYW5zaXRpb246IDAuMnMgZWFzZS1vdXQ7XHJcbiAgICBtaW4td2lkdGg6IDUwcHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuICBcclxuLmNoYXRCdXR0b246ZGlzYWJsZWQge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0YwRUVFQjtcclxuICAgIGJvcmRlci1jb2xvcjogI0YwRUVFQjtcclxufVxyXG4gIFxyXG4gIFxyXG4uY2hhdEJ1dHRvbjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDQ0O1xyXG59XHJcblxyXG5cclxuXHJcbi8qICogKiAqICogQ0hBVCBURVhUIElOUFVUICogKiAqICogKi9cclxuXHJcbi5pbnB1dFdyYXBwZXIge1xyXG4gICAgZmxleDogNTtcclxuICAgIHBhZGRpbmctbGVmdDogODBweDtcclxuICAgIHBhZGRpbmctcmlnaHQ6IDE2cHg7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG59XHJcblxyXG4uY2hhdElucHV0IHsgXHJcbiAgICBmbGV4OiAxOyBcclxuICAgIHdpZHRoOiBhdXRvO1xyXG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXNpemU6IDEuM2VtO1xyXG4gICAgY29sb3I6IGJsYWNrOyAgIFxyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICB0cmFuc2l0aW9uOiAwLjFzIGVhc2Utb3V0OyBcclxuICAgIHBhZGRpbmctbGVmdDogMTZweDtcclxuICAgIHdpZHRoOiAxMDAlOyBcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbi5jaGF0SW5wdXQ6Zm9jdXMge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIzOCwgMjQyLCAyNDcpO1xyXG4gICAgY29sb3I6ICMyMjI7XHJcbiAgICB0cmFuc2l0aW9uOiAwLjFzIGVhc2UtaW47XHJcbn1cclxuICAiXX0= */\"","module.exports = \"<!-- The chat form represents the chat functionality-->\\r\\n<div class=\\\"inputWrapper\\\">\\r\\n  <textarea\\r\\n    class =\\\"chatInput\\\" \\r\\n    [(ngModel)]=\\\"message\\\" \\r\\n    (keydown)=\\\"handleSubmit($event)\\\"></textarea>\\r\\n  <!--\\r\\n  <input\\r\\n    class =\\\"chatInput\\\"\\r\\n    [(ngModel)]=\\\"message\\\"\\r\\n    (keydown)=\\\"handleSubmit($event)\\\"\\r\\n    />\\r\\n  -->\\r\\n</div>\\r\\n<button class=\\\"chatButton\\\" (click)=send()>Send</button>\"","import {Component, OnInit} from '@angular/core';\r\n\r\nimport {MessageService} from 'src/app/services/dechat/message.service';\r\n\r\n@Component({\r\n    selector: 'app-chat-form',\r\n    templateUrl: './chat-form.component.html',\r\n    styleUrls: ['./chat-form.component.css']\r\n})\r\nexport class ChatFormComponent implements OnInit {\r\n\r\n    // Attributes //\r\n    message: string; // Corresponds to the ng bingding in the html <input/>\r\n\r\n    // Constructor //\r\n    constructor(private messageService: MessageService) {\r\n        this.message = '';\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    // Methods //\r\n\r\n    send() {\r\n\r\n        this.message = this.message.trim();\r\n        if (this.message.length <= 0) {\r\n            return;\r\n        }\r\n\r\n        this.messageService.sendMessage(this.message);\r\n        this.message = '';\r\n    }\r\n\r\n    // Called every time a key is pressed (keydown event)\r\n    handleSubmit(event) {\r\n\r\n        // Dear future me: === means same value and type.\r\n        if (event.keyCode === 13) {\r\n            this.send();\r\n        }\r\n    }\r\n\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NoYXRDb21wb25lbnRzL2NoYXQtaGVhZGVyL2NoYXQtaGVhZGVyLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<p>\\r\\n  chat-header works!\\r\\n</p>\\r\\n\"","import {Component, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-chat-header',\r\n    templateUrl: './chat-header.component.html',\r\n    styleUrls: ['./chat-header.component.css']\r\n})\r\nexport class ChatHeaderComponent implements OnInit {\r\n\r\n// Atributes\r\n    ready: boolean;\r\n\r\n    constructor() {\r\n        this.ready = true;\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n}\r\n","module.exports = \"\\r\\n.chatroom {\\r\\n    display: grid;\\r\\n    grid-template-rows: 80% 20%;\\r\\n    height: 100%;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.chatHeaderWrapper {\\r\\n    display: flex;\\r\\n    height: 50px;\\r\\n    width: 100%;\\r\\n    background-color: white;\\r\\n    z-index: 1;\\r\\n}\\r\\n\\r\\n.feedWrapper {\\r\\n    display: flex;\\r\\n    flex-direction: column-reverse;\\r\\n    overflow-y: scroll;\\r\\n    padding: 20px 0px 0px 24px;\\r\\n}\\r\\n\\r\\n.chatFormWrapper {\\r\\n    display: flex;\\r\\n    height: 80px;\\r\\n    background-color: rgba(0, 0, 0, 0);\\r\\n    z-index: 3;\\r\\n    padding: 8px;\\r\\n}\\r\\n\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2hhdENvbXBvbmVudHMvY2hhdHJvb20vY2hhdHJvb20uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7SUFDSSxhQUFhO0lBQ2IsMkJBQTJCO0lBQzNCLFlBQVk7SUFDWixnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsWUFBWTtJQUNaLFdBQVc7SUFDWCx1QkFBdUI7SUFDdkIsVUFBVTtBQUNkOztBQUVBO0lBQ0ksYUFBYTtJQUNiLDhCQUE4QjtJQUM5QixrQkFBa0I7SUFDbEIsMEJBQTBCO0FBQzlCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLFlBQVk7SUFDWixrQ0FBa0M7SUFDbEMsVUFBVTtJQUNWLFlBQVk7QUFDaEIiLCJmaWxlIjoic3JjL2FwcC9jaGF0Q29tcG9uZW50cy9jaGF0cm9vbS9jaGF0cm9vbS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi5jaGF0cm9vbSB7XHJcbiAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiA4MCUgMjAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG5cclxuLmNoYXRIZWFkZXJXcmFwcGVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgei1pbmRleDogMTtcclxufVxyXG5cclxuLmZlZWRXcmFwcGVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7XHJcbiAgICBvdmVyZmxvdy15OiBzY3JvbGw7XHJcbiAgICBwYWRkaW5nOiAyMHB4IDBweCAwcHggMjRweDtcclxufVxyXG5cclxuLmNoYXRGb3JtV3JhcHBlciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgaGVpZ2h0OiA4MHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwKTtcclxuICAgIHotaW5kZXg6IDM7XHJcbiAgICBwYWRkaW5nOiA4cHg7XHJcbn1cclxuXHJcbiJdfQ== */\"","module.exports = \"<div class=\\\"chatroom\\\">\\r\\n\\r\\n\\r\\n    <!-- The feed contains all the messages-->\\r\\n    <div #scroller class=\\\"feedWrapper\\\">\\r\\n        <app-feed></app-feed>\\r\\n    </div>\\r\\n\\r\\n    <!-- The chat form represents the chat functionality-->\\r\\n    <div *ngIf=\\\"chatService.currentChat != undefined\\\"\\r\\n         class=\\\"chatFormWrapper\\\">\\r\\n        <app-chat-form></app-chat-form>\\r\\n    </div>\\r\\n\\r\\n</div>\\r\\n\"","import {AfterViewChecked, Component, ElementRef, OnInit, SimpleChanges, ViewChild} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\nimport {MessageBundle} from 'src/app/models/dechat/message-bundle.model';\r\nimport {ChatService} from '../../services/dechat/chat.service';\r\n\r\n@Component({\r\n    selector: 'app-chatroom',\r\n    templateUrl: './chatroom.component.html',\r\n    styleUrls: ['./chatroom.component.css']\r\n})\r\nexport class ChatroomComponent implements OnInit, AfterViewChecked {\r\n\r\n    // Reference to the #scroller element in the DOM\r\n    @ViewChild('scroller') feedContainer: ElementRef;\r\n\r\n\r\n    constructor(public chatService: ChatService) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n    ngAfterViewChecked() {\r\n        this.scrollToBottom();\r\n    }\r\n\r\n\r\n    scrollToBottom(): void {\r\n        this.feedContainer.nativeElement.scrollTop =\r\n            this.feedContainer.nativeElement.scrollHeight;\r\n    }\r\n\r\n}\r\n","module.exports = \"\\r\\n\\r\\n.feed {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n}\\r\\n\\r\\n.message {\\r\\n    flex-direction: column;\\r\\n    margin: 10px 0px;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2hhdENvbXBvbmVudHMvZmVlZC9mZWVkLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxzQkFBc0I7SUFDdEIsZ0JBQWdCO0FBQ3BCIiwiZmlsZSI6InNyYy9hcHAvY2hhdENvbXBvbmVudHMvZmVlZC9mZWVkLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbi5mZWVkIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG59XHJcblxyXG4ubWVzc2FnZSB7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgbWFyZ2luOiAxMHB4IDBweDtcclxufSJdfQ== */\"","module.exports = \"<div class=\\\"feed\\\">\\r\\n\\r\\n  <!-- the feed contains a collection of message objects -->\\r\\n  <!-- for each message, we are generating a chatMessage component -->\\r\\n  <div *ngFor=\\\"let message of feed | async\\\" class=\\\"message\\\">\\r\\n    <app-message [chatMessage]=message></app-message>\\r\\n  </div>\\r\\n  \\r\\n</div>\"","import {Component, OnChanges, OnInit, SimpleChanges} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\nimport {MessageService} from 'src/app/services/dechat/message.service';\r\nimport {ChatMessage} from '../../models/dechat/chat-message.model';\r\n\r\n@Component({\r\n    selector: 'app-feed',\r\n    templateUrl: './feed.component.html',\r\n    styleUrls: ['./feed.component.css']\r\n})\r\nexport class FeedComponent implements OnInit, OnChanges {\r\n\r\n    feed: Observable<ChatMessage[]>;\r\n\r\n    ready: boolean;\r\n\r\n    constructor(private messageService: MessageService) {\r\n        this.ready = true;\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.update();\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges): void {\r\n        this.update();\r\n    }\r\n\r\n    update(): void {\r\n        this.feed = this.messageService.getMessages();\r\n    }\r\n\r\n}\r\n","module.exports = \"\\r\\n\\r\\n\\r\\n.messageContainer {\\r\\n    display: flex;\\r\\n    height: auto;\\r\\n    width: 70%;\\r\\n    min-width: 400px;\\r\\n    border-radius: 5px;\\r\\n    align-items: stretch;\\r\\n    background-color: rgb(218, 218, 218);\\r\\n    box-shadow: 0 3px 6px rgba(0, 0, 0, .26),\\r\\n                0 3px 6px rgba(0, 0, 0, .23);\\r\\n}\\r\\n\\r\\n.isOwnMessageContainer {\\r\\n    background-color: rgb(76, 211, 98);\\r\\n}\\r\\n\\r\\n/* * * * * MESSAGE DATA: sender, date, etc. * * * * */\\r\\n\\r\\n.messageData {\\r\\n    flex: 1;\\r\\n    padding: 10px;\\r\\n    font-size: .7em;\\r\\n}\\r\\n\\r\\n.sender {\\r\\n    display: block;\\r\\n    color: #222;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n.isOwnSender {\\r\\n    color: lightgray;\\r\\n}\\r\\n\\r\\n.timeSent {\\r\\n    color: #555;\\r\\n    font-style: italic;\\r\\n}\\r\\n\\r\\n.isOwnTimeSent {\\r\\n    color: green;\\r\\n}\\r\\n\\r\\n/* * * * * MESSAGE CONTENT * * * * */\\r\\n\\r\\n.messageContent {\\r\\n    height: auto;\\r\\n    flex: 9;\\r\\n    background-color: white;\\r\\n    padding: 10px;\\r\\n    border-top-right-radius: 5px;\\r\\n    border-bottom-right-radius: 5px;\\r\\n}\\r\\n\\r\\n.isOwnMessageContent {\\r\\n    background-color: #E3F2FD;\\r\\n    color: lightseagreen;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2hhdENvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBR0E7SUFDSSxhQUFhO0lBQ2IsWUFBWTtJQUNaLFVBQVU7SUFDVixnQkFBZ0I7SUFDaEIsa0JBQWtCO0lBQ2xCLG9CQUFvQjtJQUNwQixvQ0FBb0M7SUFDcEM7NENBQ3dDO0FBQzVDOztBQUVBO0lBQ0ksa0NBQWtDO0FBQ3RDOztBQUtBLHFEQUFxRDs7QUFFckQ7SUFDSSxPQUFPO0lBQ1AsYUFBYTtJQUNiLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxjQUFjO0lBQ2QsV0FBVztJQUNYLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxZQUFZO0FBQ2hCOztBQUlBLG9DQUFvQzs7QUFFcEM7SUFDSSxZQUFZO0lBQ1osT0FBTztJQUNQLHVCQUF1QjtJQUN2QixhQUFhO0lBQ2IsNEJBQTRCO0lBQzVCLCtCQUErQjtBQUNuQzs7QUFFQTtJQUNJLHlCQUF5QjtJQUN6QixvQkFBb0I7QUFDeEIiLCJmaWxlIjoic3JjL2FwcC9jaGF0Q29tcG9uZW50cy9tZXNzYWdlL21lc3NhZ2UuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuXHJcbi5tZXNzYWdlQ29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBoZWlnaHQ6IGF1dG87XHJcbiAgICB3aWR0aDogNzAlO1xyXG4gICAgbWluLXdpZHRoOiA0MDBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIGFsaWduLWl0ZW1zOiBzdHJldGNoO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIxOCwgMjE4LCAyMTgpO1xyXG4gICAgYm94LXNoYWRvdzogMCAzcHggNnB4IHJnYmEoMCwgMCwgMCwgLjI2KSxcclxuICAgICAgICAgICAgICAgIDAgM3B4IDZweCByZ2JhKDAsIDAsIDAsIC4yMyk7XHJcbn1cclxuXHJcbi5pc093bk1lc3NhZ2VDb250YWluZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDc2LCAyMTEsIDk4KTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuLyogKiAqICogKiBNRVNTQUdFIERBVEE6IHNlbmRlciwgZGF0ZSwgZXRjLiAqICogKiAqICovXHJcblxyXG4ubWVzc2FnZURhdGEge1xyXG4gICAgZmxleDogMTtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBmb250LXNpemU6IC43ZW07XHJcbn1cclxuXHJcbi5zZW5kZXIge1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICBjb2xvcjogIzIyMjtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcblxyXG4uaXNPd25TZW5kZXIge1xyXG4gICAgY29sb3I6IGxpZ2h0Z3JheTtcclxufVxyXG5cclxuLnRpbWVTZW50IHtcclxuICAgIGNvbG9yOiAjNTU1O1xyXG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xyXG59XHJcblxyXG4uaXNPd25UaW1lU2VudCB7XHJcbiAgICBjb2xvcjogZ3JlZW47XHJcbn1cclxuXHJcblxyXG5cclxuLyogKiAqICogKiBNRVNTQUdFIENPTlRFTlQgKiAqICogKiAqL1xyXG5cclxuLm1lc3NhZ2VDb250ZW50IHtcclxuICAgIGhlaWdodDogYXV0bztcclxuICAgIGZsZXg6IDk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNXB4O1xyXG4gICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDVweDtcclxufVxyXG5cclxuLmlzT3duTWVzc2FnZUNvbnRlbnQge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0UzRjJGRDtcclxuICAgIGNvbG9yOiBsaWdodHNlYWdyZWVuO1xyXG59Il19 */\"","module.exports = \"<div class=\\\"messageContainer\\\"\\r\\n    [ngClass]=\\\"{'isOwnMessageContainer':isOwnMessage}\\\">\\r\\n\\r\\n  <div class=\\\"messageData\\\">\\r\\n    <span class=\\\"sender\\\">{{ userName }}</span>\\r\\n    <span class=\\\"timeSent\\\">{{ timeSent }}</span>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"messageContent\\\"\\r\\n      [ngClass]=\\\"{'isOwnMessageContent':isOwnMessage}\\\">\\r\\n    {{ messageContent }}\\r\\n  </div>\\r\\n  \\r\\n  <div class=\\\"multimediaWrapper\\\">\\r\\n    <app-multimedia-display></app-multimedia-display>    \\r\\n  </div> \\r\\n\\r\\n</div>\"","import {Component, Input, OnInit} from '@angular/core';\r\nimport {ChatMessage} from '../../models/dechat/chat-message.model';\r\nimport {MultimediaDisplayComponent} from '../multimedia-display/multimedia-display.component';\r\n\r\n@Component({\r\n    selector: 'app-message',\r\n    templateUrl: './message.component.html',\r\n    styleUrls: ['./message.component.css']\r\n})\r\nexport class MessageComponent implements OnInit {\r\n\r\n    @Input() chatMessage: ChatMessage;\r\n    @Input() multimedia: MultimediaDisplayComponent;\r\n    userEmail: string;\r\n    userName: string;\r\n    messageContent: string;\r\n    timeSent: string;\r\n    // isOwnMessage: boolean;\r\n    ready: boolean;\r\n\r\n    constructor() {\r\n        this.ready = true;\r\n    }\r\n\r\n    ngOnInit(chatMessage = this.chatMessage, multim = this.multimedia) {\r\n        if (chatMessage == undefined) {\r\n            return;\r\n        }\r\n\r\n        this.messageContent = chatMessage.message;\r\n        this.userName = chatMessage.userName;\r\n        this.timeSent = this.getTimeStamp(chatMessage.date);\r\n    }\r\n\r\n    getTimeStamp(date: Date) {\r\n\r\n        const day = date.getUTCFullYear() + '/' +\r\n            (date.getUTCMonth() + 1) + '/' +\r\n            date.getUTCDate();\r\n\r\n        const time = date.getUTCHours() + ':' +\r\n            date.getUTCMinutes();\r\n\r\n        return day + ' ' + time;\r\n    }\r\n\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NoYXRDb21wb25lbnRzL211bHRpbWVkaWEtZGlzcGxheS9tdWx0aW1lZGlhLWRpc3BsYXkuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<!-- \\r\\n  We need to show the multimedia element in \\r\\n  different ways according to its type.\\r\\n-->\\r\\n\\r\\n<!-- In case it is a video. -->\\r\\n<div *ngIf=\\\"multimediaType === 'video'\\\">\\r\\n  <video width=\\\"480\\\" height=\\\"360\\\" controls>\\r\\n    <source [src]=\\\"multimediaURL\\\"/>\\r\\n    Your browser does not support the video HTML tag.\\r\\n  </video>\\r\\n</div>\\r\\n\\r\\n<!-- In case it is an audio. -->\\r\\n<div *ngIf=\\\"multimediaType === 'audio'\\\">\\r\\n  <audio controls>\\r\\n    <source [src]=\\\"multimediaURL\\\"/>\\r\\n    Your browser does not support the audio HTML tag.\\r\\n  </audio>\\r\\n</div>\\r\\n\\r\\n<!-- In case it is a image. -->\\r\\n<div *ngIf=\\\"multimediaType === 'image'\\\">\\r\\n    <img [src]=\\\"multimediaURL\\\"/>\\r\\n</div>\\r\\n\\r\\n\"","import {Component, Input, OnInit} from '@angular/core';\r\nimport {Multimedia} from 'src/app/models/dechat/multimedia.model';\r\n\r\n@Component({\r\n    selector: 'app-multimedia-display',\r\n    templateUrl: './multimedia-display.component.html',\r\n    styleUrls: ['./multimedia-display.component.css']\r\n})\r\nexport class MultimediaDisplayComponent implements OnInit {\r\n\r\n    // Properties\r\n    @Input() multimedia: Multimedia;\r\n    multimediaURL: string;\r\n    multimediaType: string;\r\n    multimediaExten: string;\r\n    ready: boolean;\r\n\r\n    constructor() {\r\n        this.ready = true;\r\n    }\r\n\r\n    ngOnInit(multim = this.multimedia) {\r\n        /*\r\n        // Actual implementation\r\n        this.multimediaURL = multim.url;\r\n        this.multimediaType = multim.type;\r\n        this.multimediaExten = multim.extension;\r\n        */\r\n\r\n        // For testing purposes\r\n\r\n        // Image\r\n        /*\r\n        this.multimediaURL = 'https://i.redd.it/hf5v5rp6dir11.jpg';\r\n        this.multimediaType = 'image';\r\n        this.multimediaExten = 'jpg';\r\n        */\r\n\r\n        // Video\r\n        this.multimediaURL = 'https://audio-video.gnu.org/video/short--undated--rms--what-is-gnu-plus-linux--480p.webm';\r\n        this.multimediaType = 'video';\r\n        this.multimediaExten = 'webm';\r\n    }\r\n\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div class=\\\"dashboard\\\">\\r\\n  <p>Your webId is {{ session.webId }}</p>\\r\\n  <ul>\\r\\n    <li><a [routerLink]=\\\"['/card']\\\">Profile</a></li>\\r\\n    <li><a (click)=\\\"onSignOut()\\\">Signout</a></li>\\r\\n  </ul>\\r\\n</div>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n// import { currentSession } from 'solid-auth-client';\r\n\r\n// Services\r\nimport { AuthService } from '../services/solid/solid.auth.service';\r\n\r\nclass Session {\r\n  constructor() {}\r\n\r\n  webId: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.component.html',\r\n  styleUrls: ['./dashboard.component.css']\r\n})\r\nexport class DashboardComponent implements OnInit {\r\n  session: Session = new Session();\r\n\r\n  constructor(private auth: AuthService, private route: ActivatedRoute) {}\r\n\r\n  ngOnInit() {\r\n    console.log('hello');\r\n    this.loadSession();\r\n  }\r\n\r\n  loadSession = async () => {\r\n    // this.session = await currentSession();\r\n  }\r\n\r\n  onSignOut = () => {\r\n    this.auth.solidSignOut();\r\n  }\r\n\r\n}\r\n","module.exports = \"\\r\\n.newChatDialog {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    z-index: 10;\\r\\n}\\r\\n\\r\\n.contactWrapper {\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZGlhbG9nQ29tcG9uZW50cy9uZXctY2hhdC1kaWFsb2cvbmV3LWNoYXQtZGlhbG9nLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0lBQ0ksYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixXQUFXO0FBQ2Y7O0FBRUE7QUFDQSIsImZpbGUiOiJzcmMvYXBwL2RpYWxvZ0NvbXBvbmVudHMvbmV3LWNoYXQtZGlhbG9nL25ldy1jaGF0LWRpYWxvZy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi5uZXdDaGF0RGlhbG9nIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgei1pbmRleDogMTA7XHJcbn1cclxuXHJcbi5jb250YWN0V3JhcHBlciB7XHJcbn0iXX0= */\"","module.exports = \"<div class=\\\"newChatDialog\\\">\\r\\n\\r\\n  <div class=\\\"titleWrapper\\\">\\r\\n    <h1>New chat</h1>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"nameWrapper\\\">\\r\\n      <input [(ngModel)]=\\\"chatName\\\" placeholder=\\\"New chat name\\\">\\r\\n  </div>\\r\\n\\r\\n  <div *ngFor=\\\"let message of feed | async\\\" class=\\\"message\\\">\\r\\n    <app-message [chatMessage]=message></app-message>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"contactListWrapper\\\">\\r\\n      <div class=\\\"contactWrapper\\\" *ngFor=\\\"let contact of contacts\\\" (click)=\\\"onContactClick(contact)\\\">\\r\\n        <app-user-display-slot [user]=contact></app-user-display-slot>\\r\\n        <span class=\\\"contactCheck\\\" *ngIf=\\\"isContactIn(contact)\\\"></span>\\r\\n      </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"actionsWrapper\\\">\\r\\n    <button (click)=\\\"cancel()\\\">Back</button>\\r\\n    <button (click)=\\\"create()\\\">Let's chat!</button>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\"","import { Component, OnInit, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\r\nimport { User } from '../../models/dechat/user.model';\r\nimport { UserService } from '../../services/dechat/user.service';\r\nimport { ChatService } from 'src/app/services/dechat/chat.service';\r\n\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-new-chat-dialog',\r\n  templateUrl: './new-chat-dialog.component.html',\r\n  styleUrls: ['./new-chat-dialog.component.css']\r\n})\r\nexport class NewChatDialogComponent implements OnInit {\r\n\r\n  chatName : string;\r\n  users : User[];\r\n\r\n  contacts : User[];\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<NewChatDialogComponent>,\r\n    private userService : UserService,\r\n    private chatService : ChatService\r\n  ) {\r\n    this.users = [];\r\n    this.contacts = [];\r\n    this.setUp();\r\n  }\r\n\r\n  ngOnInit() {\r\n    \r\n  }\r\n\r\n\r\n  private async setUp() {\r\n    var c = await this.userService.getContacts();\r\n    c.forEach(contact => this.contacts.push(contact));\r\n  }\r\n\r\n\r\n  onContactClick(contact : User) {\r\n    console.log(\"You clicked on \" + contact.nickname);\r\n\r\n    // If he's in, delete him\r\n    for (var i = 0; i < this.users.length; i ++) {\r\n      if (this.users[i] == contact) {\r\n        this.users.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n    // Otherwise, add\r\n    this.users.push(contact);\r\n  }\r\n\r\n  isContactIn(contact : User) {\r\n    return this.users.includes(contact);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  cancel() {\r\n    this.closeDialog();\r\n  }\r\n\r\n\r\n  async create() {\r\n\r\n    if (this.chatName == undefined)\r\n      return; // TODO warn error\r\n\r\n    if (this.users.length == 0)\r\n      return; // TODO warn error\r\n    \r\n\r\n    console.log(\"Creating new chat\");\r\n    console.log(\"Chat name: \" + this.chatName);\r\n    \r\n    var chat = await this.chatService.createGroupChat(this.chatName, this.users);\r\n    this.chatService.allChats.push(chat);\r\n    await this.chatService.openChat(chat);\r\n\r\n    this.closeDialog();\r\n  }\r\n\r\n\r\n  private closeDialog() {\r\n    this.dialogRef.close('Dialog closed!');\r\n  }\r\n\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2xvZ2luLXBvcHVwL2xvZ2luLXBvcHVwLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div id=\\\"app-container\\\">Loading...</div>\\r\\n\\r\\n\\r\\n\"","import {Component, ElementRef, OnInit} from '@angular/core';\r\n\r\ndeclare let popup: any;\r\n\r\n@Component({\r\n    selector: 'app-login-popup',\r\n    templateUrl: './login-popup.component.html',\r\n    styleUrls: ['./login-popup.component.css']\r\n})\r\nexport class LoginPopupComponent implements OnInit {\r\n\r\n    constructor(private elementRef: ElementRef) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.runScript();\r\n    }\r\n\r\n    runScript() {\r\n        const s = document.createElement('script');\r\n        s.type = 'text/javascript';\r\n        s.src = '/assets/js/libs/popup.js';\r\n        this.elementRef.nativeElement.appendChild(s);\r\n        // s.onload = () => this.triggerDuo();\r\n    }\r\n\r\n}\r\n","module.exports = \"\\r\\n.login-page {\\r\\n  text-align: center;\\r\\n  font-family: 'Roboto', sans-serif;\\r\\n  color: #666;\\r\\n}\\r\\n\\r\\n.login-page h1 {\\r\\n  font-size: 38px;\\r\\n  text-transform: uppercase;\\r\\n  font-weight: bold;\\r\\n  line-height: 50px;\\r\\n  letter-spacing: 1.9px;\\r\\n  padding-top: 12px;\\r\\n  margin-top: 0px;\\r\\n}\\r\\n\\r\\n.login-page h2 {\\r\\n  color: #666;\\r\\n\\r\\n  font-size: 16px;\\r\\n  font-weight: 500;\\r\\n  letter-spacing: 1px;\\r\\n  line-height: 21px;\\r\\n  margin-top: 48px;\\r\\n}\\r\\n\\r\\n.login-page .small-link {\\r\\n  font-size: 12px;\\r\\n  color: #666;\\r\\n  letter-spacing: 0.75px;\\r\\n  line-height: 16px;\\r\\n}\\r\\n\\r\\n.login-page .registration-link {\\r\\n  margin-top: 38px;\\r\\n}\\r\\n\\r\\n.login-page .registration-link p {\\r\\n  font-size: 16px;\\r\\n  color: #666;\\r\\n  letter-spacing: 1px;\\r\\n}\\r\\n\\r\\n.login-page .item-divider {\\r\\n  box-sizing:border-box;\\r\\n  height: 1px;\\r\\n  width: 354px;\\r\\n  border-bottom: 1px solid #E0E0E0;\\r\\n  position: absolute;\\r\\n  bottom:-8px; left:-9px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsaUNBQWlDO0VBQ2pDLFdBQVc7QUFDYjs7QUFFQTtFQUNFLGVBQWU7RUFDZix5QkFBeUI7RUFDekIsaUJBQWlCO0VBQ2pCLGlCQUFpQjtFQUNqQixxQkFBcUI7RUFDckIsaUJBQWlCO0VBQ2pCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxXQUFXOztFQUVYLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLGlCQUFpQjtFQUNqQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsV0FBVztFQUNYLHNCQUFzQjtFQUN0QixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsV0FBVztFQUNYLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixXQUFXO0VBQ1gsWUFBWTtFQUNaLGdDQUFnQztFQUNoQyxrQkFBa0I7RUFDbEIsV0FBVyxFQUFFLFNBQVM7QUFDeEIiLCJmaWxlIjoic3JjL2FwcC9sb2dpbi9sb2dpbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi5sb2dpbi1wYWdlIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nLCBzYW5zLXNlcmlmO1xyXG4gIGNvbG9yOiAjNjY2O1xyXG59XHJcblxyXG4ubG9naW4tcGFnZSBoMSB7XHJcbiAgZm9udC1zaXplOiAzOHB4O1xyXG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgbGluZS1oZWlnaHQ6IDUwcHg7XHJcbiAgbGV0dGVyLXNwYWNpbmc6IDEuOXB4O1xyXG4gIHBhZGRpbmctdG9wOiAxMnB4O1xyXG4gIG1hcmdpbi10b3A6IDBweDtcclxufVxyXG5cclxuLmxvZ2luLXBhZ2UgaDIge1xyXG4gIGNvbG9yOiAjNjY2O1xyXG5cclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICBsZXR0ZXItc3BhY2luZzogMXB4O1xyXG4gIGxpbmUtaGVpZ2h0OiAyMXB4O1xyXG4gIG1hcmdpbi10b3A6IDQ4cHg7XHJcbn1cclxuXHJcbi5sb2dpbi1wYWdlIC5zbWFsbC1saW5rIHtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgY29sb3I6ICM2NjY7XHJcbiAgbGV0dGVyLXNwYWNpbmc6IDAuNzVweDtcclxuICBsaW5lLWhlaWdodDogMTZweDtcclxufVxyXG5cclxuLmxvZ2luLXBhZ2UgLnJlZ2lzdHJhdGlvbi1saW5rIHtcclxuICBtYXJnaW4tdG9wOiAzOHB4O1xyXG59XHJcblxyXG4ubG9naW4tcGFnZSAucmVnaXN0cmF0aW9uLWxpbmsgcCB7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG4gIGNvbG9yOiAjNjY2O1xyXG4gIGxldHRlci1zcGFjaW5nOiAxcHg7XHJcbn1cclxuXHJcbi5sb2dpbi1wYWdlIC5pdGVtLWRpdmlkZXIge1xyXG4gIGJveC1zaXppbmc6Ym9yZGVyLWJveDtcclxuICBoZWlnaHQ6IDFweDtcclxuICB3aWR0aDogMzU0cHg7XHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNFMEUwRTA7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGJvdHRvbTotOHB4OyBsZWZ0Oi05cHg7XHJcbn1cclxuIl19 */\"","module.exports = \"<div class=\\\"login-page\\\">\\r\\n\\r\\n  <!-- APP LOGO -->\\r\\n  <div style=\\\"margin-top:60px;\\\">\\r\\n    <i class=\\\"fas fa-user-circle\\\" style=\\\"font-size: 64px;\\\"></i>\\r\\n  </div>\\r\\n\\r\\n  <!-- APP NAME -->\\r\\n  <h1>\\r\\n    Profile Demo App\\r\\n  </h1>\\r\\n\\r\\n  <!-- LOGIN TITLE -->\\r\\n  <h2>\\r\\n    Login with Solid Identity\\r\\n  </h2>\\r\\n\\r\\n  <!-- PROVIDER SELECTION -->\\r\\n  <div style=\\\"margin-top: 10px;\\\">\\r\\n    <ng-select class=\\\"login-select\\\"\\r\\n               bindLabel=\\\"name\\\"\\r\\n               bindValue=\\\"loginUrl\\\"\\r\\n               placeholder=\\\"Select ID Provider\\\"\\r\\n               dropdownPosition=\\\"bottom\\\"\\r\\n               [items]=\\\"identityProviders\\\"\\r\\n               [(ngModel)]=\\\"selectedProviderUrl\\\"\\r\\n               style=\\\"width: 360px; height: 48px; margin-left: auto; margin-right: auto;\\\">\\r\\n\\r\\n      <!-- DROPDOWN TEMPLATE -->\\r\\n      <ng-template ng-option-tmp let-item=\\\"item\\\">\\r\\n        <div style=\\\"height:40px; padding-top:10px; position: relative;\\\">\\r\\n          <img [src]=\\\"item.image\\\" style=\\\"float: left; height: 32px; width: 32px; margin-top:-5px;\\\" />\\r\\n          <span style=\\\"float: left; margin-left: 10px;\\\">{{ item.name }}</span>\\r\\n          <div style=\\\"clear: both;\\\"></div>\\r\\n          <div class=\\\"item-divider\\\"></div>\\r\\n        </div>\\r\\n      </ng-template>\\r\\n\\r\\n    </ng-select>\\r\\n    <input type=\\\"text\\\"\\r\\n           class=\\\"wide-text\\\"\\r\\n           *ngIf=\\\"selectedProviderUrl===null\\\"\\r\\n           placeholder=\\\"Enter WebID\\\"\\r\\n           style=\\\"margin-top:10px; padding: 12px 10px; width: 340px; height: 16px; display: block; margin-left: auto; margin-right: auto;\\\"\\r\\n           [(ngModel)]=\\\"customProviderUrl\\\" />\\r\\n    <button class=\\\"wide-button\\\" (click)=\\\"onLogin()\\\" *ngIf=\\\"selectedProviderUrl !== undefined || customProviderUrl !== undefined\\\" [disabled]=\\\"selectedProviderUrl===null && !customProviderUrl\\\" style=\\\"margin-top:10px;\\\">Go</button>\\r\\n  </div>\\r\\n\\r\\n  <!-- REGISTRATION -->\\r\\n  <div class=\\\"registration-link\\\">\\r\\n    <p style=\\\"margin: 12px;\\\">Don't have a Solid Identity?</p>\\r\\n    <button class=\\\"wide-button\\\" (click)=\\\"goToRegistration()\\\">Register</button>\\r\\n  </div>\\r\\n\\r\\n  <!-- HELP -->\\r\\n  <div style=\\\"margin-top: 48px;\\\">\\r\\n    <a href=\\\"https://solid.mit.edu\\\" target=\\\"_blank\\\" class=\\\"small-link\\\">\\r\\n      <i class=\\\"fas fa-info-circle\\\"></i> What is a Solid Identity?\\r\\n    </a>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n  \\r\\n\\r\\n\"","import {Component, OnInit} from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {SolidProvider} from '../models/solid/solid-provider.model';\r\n// Auth Service\r\nimport {AuthService} from '../services/solid/solid.auth.service';\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    templateUrl: './login.component.html',\r\n    styleUrls: ['./login.component.css'],\r\n})\r\nexport class LoginComponent implements OnInit {\r\n\r\n    constructor(private auth: AuthService, private router: Router) {\r\n    }\r\n\r\n    /**\r\n     * A list of Solid Identity Providers\r\n     * @type {SolidProvider[]}\r\n     */\r\n    identityProviders: SolidProvider[];\r\n    selectedProviderUrl: string;\r\n    customProviderUrl: string;\r\n\r\n    ngOnInit() {\r\n        // If we're authenticated, go to profile\r\n        if (localStorage.getItem('solid-auth-client')) {\r\n            this.router.navigateByUrl('/chat');\r\n        }\r\n\r\n        this.identityProviders = this.auth.getIdentityProviders();\r\n    }\r\n\r\n    /*\r\n    *  Alternate login-popup function for Solid. See service for more details.\r\n    */\r\n    onLoginPopup = async () => {\r\n        this.auth.solidLoginPopup();\r\n    }\r\n\r\n    onLogin = async () => {\r\n        const idp: string = this.selectedProviderUrl ? this.selectedProviderUrl : this.customProviderUrl;\r\n\r\n        if (idp) {\r\n            try {\r\n                this.auth.solidLogin(idp);\r\n            } catch (err) {\r\n                console.log('An error has occurred logging in: ' + err);\r\n            }\r\n        }\r\n    }\r\n\r\n    goToRegistration() {\r\n        window.location.href = 'https://solid.community/register';\r\n    }\r\n}\r\n","module.exports = \"\\r\\n.mainContent {\\r\\n    height: 100%;\\r\\n    width: 100%;\\r\\n    display: grid;\\r\\n    grid-template-columns: 20% 80%;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.userListWrapper {\\r\\n    display: flex;\\r\\n    flex: 1;\\r\\n    background-color: #2A2845;\\r\\n    color: white;\\r\\n    padding: 20px 0px 40px 30px;\\r\\n    border-right: 1px solid #222;\\r\\n    overflow-y: scroll;\\r\\n}\\r\\n\\r\\n.chatroomWrapper {\\r\\n    background-color: white;\\r\\n    background: linear-gradient(180deg,\\r\\n    rgba(196, 228, 238, 0.5),\\r\\n    rgba(0, 0, 0, .7)),\\r\\n    url('chat-bg-1.jpg') center center no-repeat;\\r\\n}\\r\\n\\r\\napp-chatroom {\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWFpbi1jb250ZW50L21haW4tY29udGVudC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTtJQUNJLFlBQVk7SUFDWixXQUFXO0lBQ1gsYUFBYTtJQUNiLDhCQUE4QjtJQUM5QixnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsT0FBTztJQUNQLHlCQUF5QjtJQUN6QixZQUFZO0lBQ1osMkJBQTJCO0lBQzNCLDRCQUE0QjtJQUM1QixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSx1QkFBdUI7SUFDdkI7OztnREFHMkQ7QUFDL0Q7O0FBRUE7SUFDSSxZQUFZO0FBQ2hCIiwiZmlsZSI6InNyYy9hcHAvbWFpbi1jb250ZW50L21haW4tY29udGVudC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi5tYWluQ29udGVudCB7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGRpc3BsYXk6IGdyaWQ7XHJcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDIwJSA4MCU7XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG59XHJcblxyXG4udXNlckxpc3RXcmFwcGVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4OiAxO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzJBMjg0NTtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIHBhZGRpbmc6IDIwcHggMHB4IDQwcHggMzBweDtcclxuICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICMyMjI7XHJcbiAgICBvdmVyZmxvdy15OiBzY3JvbGw7XHJcbn1cclxuXHJcbi5jaGF0cm9vbVdyYXBwZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTgwZGVnLFxyXG4gICAgcmdiYSgxOTYsIDIyOCwgMjM4LCAwLjUpLFxyXG4gICAgcmdiYSgwLCAwLCAwLCAuNykpLFxyXG4gICAgdXJsKCdzcmMvYXNzZXRzL2ltZy9jaGF0LWJnLTEuanBnJykgY2VudGVyIGNlbnRlciBuby1yZXBlYXQ7XHJcbn1cclxuXHJcbmFwcC1jaGF0cm9vbSB7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuIl19 */\"","module.exports = \"<div class=\\\"mainContent\\\">\\r\\n    <div class=\\\"userListWrapper\\\">\\r\\n        <app-chat-list></app-chat-list>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"chatroomWrapper\\\">\\r\\n      <app-chatroom></app-chatroom>\\r\\n    </div>\\r\\n</div>\\r\\n\"","import {Component, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'app-main-content',\r\n    templateUrl: './main-content.component.html',\r\n    styleUrls: ['./main-content.component.css']\r\n})\r\nexport class MainContentComponent implements OnInit {\r\n\r\n    constructor() {\r\n    }\r\n\r\n    ngOnInit() {\r\n    }\r\n\r\n}\r\n","import { User } from \"./user.model\";\r\n\r\nexport class ChatInfo {\r\n\r\n    chatId: string;\r\n\r\n    chatName: string;\r\n    chatImage: string;\r\n\r\n    users: User[];\r\n    administrators: User[];\r\n\r\n    status?: string;\r\n\r\n    constructor(id: string) {\r\n        this.chatId = id;\r\n        this.users = [];\r\n        this.administrators = [];\r\n    }\r\n\r\n\r\n}\r\n","\r\nimport { v4 as uuid } from 'uuid';\r\nimport { ChatInfo } from './chat-info.model';\r\n\r\n// Contains the data for a single message\r\nexport class ChatMessage {\r\n\r\n    id: string;\r\n\r\n    userUrl: string;\r\n    userName: string;\r\n    message: string;\r\n    date: Date;\r\n\r\n    chatId: string;\r\n    bundleId: string;\r\n\r\n    constructor(msg: string = '') {\r\n        this.id = uuid();\r\n        this.message = msg;\r\n        this.date = new Date();\r\n    }\r\n\r\n}\r\n","import { User } from \"./user.model\";\r\nimport { ChatInfo } from './chat-info.model';\r\nimport { MessageBundle } from './message-bundle.model';\r\nimport { ChatMessage } from './chat-message.model';\r\n\r\n// Represents a whole chat.\r\n// Keep in mind it will never be uploaded to the pod,\r\n// it's just for local util usage.\r\nexport class Chat {\r\n\r\n    // TODO use it!\r\n\r\n    chatInfo : ChatInfo;\r\n    private bundles : Map<string, MessageBundle>;\r\n    unreadMessageCount : number;\r\n\r\n    constructor(chatInfo : ChatInfo) {\r\n        this.chatInfo = chatInfo;\r\n        this.bundles = new Map<string, MessageBundle>();\r\n    }\r\n\r\n    addBundle(bundle : MessageBundle) : boolean {\r\n        if (this.bundles.has(bundle.bundleId)) {\r\n            console.log(\"Failed to add bundle: already existent.\");\r\n            return false;\r\n        }\r\n        this.bundles.set(bundle.bundleId, bundle);\r\n        console.log(\"Bundle added to the Chat.\");\r\n        return true;\r\n    }\r\n\r\n    getBundles() : MessageBundle[] {\r\n        var result : MessageBundle[] = [];        \r\n        this.bundles.forEach((value, key, map) => result.push(value));        \r\n        return result;\r\n    }\r\n\r\n    getBundle(bundleId : string) : MessageBundle {\r\n        if (this.bundles.has(bundleId))\r\n            return undefined;\r\n        return this.bundles.get(bundleId);\r\n    }\r\n}\r\n","import { ChatInfo } from './chat-info.model';\r\nimport { ChatMessage } from './chat-message.model';\r\n\r\n\r\nexport enum InboxElementType {\r\n    CHAT_REQUEST,\r\n    NEW_MESSAGE\r\n}\r\n\r\n\r\nexport class InboxElement {\r\n    \r\n    chat : ChatInfo;\r\n    message : ChatMessage;\r\n    type: InboxElementType;\r\n    \r\n}","import { ChatInfo } from './chat-info.model';\r\nimport { ChatMessage } from './chat-message.model';\r\nimport { User } from './user.model';\r\n\r\n// Represents an actual chat, storing the message stack\r\n// It has an owner, so the user that owns the bundle\r\n// can controll its existance.\r\nexport class MessageBundle {\r\n\r\n    MAX_MSG_COUNT = 100;\r\n\r\n    chatId: string;\r\n    bundleId: string;\r\n    creationDate: Date;\r\n    messages: ChatMessage[];\r\n\r\n    constructor(chatId: string, id: string) {\r\n        this.chatId = chatId;\r\n        this.bundleId = id;\r\n        this.messages = [];\r\n        this.creationDate = new Date();\r\n    }\r\n\r\n    addMessage(msg: ChatMessage): boolean {\r\n        if(this.messages.length >= this.MAX_MSG_COUNT)\r\n            return false;\r\n        this.messages.push(msg);\r\n        return true;\r\n    }\r\n}\r\n","/*\r\n *  Represents a multimedia element\r\n *  that can be contained in a message.\r\n */\r\nexport class Multimedia {\r\n\r\n    // Properties\r\n    url: string;\r\n    type: string; // \"image\", \"audio\" or \"video\"\r\n    extension: string;\r\n\r\n    // Constructor\r\n    constructor(url: string, type: string, extension: string) {\r\n        this.url = url;\r\n        this.type = type;\r\n        this.extension = extension;\r\n    }\r\n\r\n}\r\n","\r\nexport class User {\r\n\r\n    url: string; // The url of the user webId\r\n    nickname: string; // nickname in the user's provider\r\n    userName?: string; // User name\r\n    profileImage: string;\r\n    status?: string; // Online, busy, offline\r\n\r\n    constructor(url: string) {\r\n        this.url = url;\r\n        this.nickname = url.replace('https://', '').split('.')[0];\r\n        this.profileImage = '/assets/images/profile.png';\r\n    }\r\n}\r\n","module.exports = \"\\r\\n.navBar {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    display: grid;\\r\\n    grid-template-columns: 10% 10% 60% 20%;\\r\\n    background-color: #EAEAEB;\\r\\n}\\r\\n\\r\\n#logo {\\r\\n    display: inline-block;\\r\\n    background: url('logo.png') no-repeat;\\r\\n    background-size: cover;\\r\\n    margin: 0px 10px 12px 12px;\\r\\n    width: 96px;\\r\\n    height: 96px;\\r\\n    min-width: 96px;\\r\\n}\\r\\n\\r\\n#heading {\\r\\n    flex: 4;\\r\\n    padding: 24px 0px 8px 10px;\\r\\n    height: 60px;\\r\\n    font-size: 1.8em;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n.links {\\r\\n    padding-top: 32px;\\r\\n    padding-right: 30px;\\r\\n    white-space: nowrap;\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n#heading > a {\\r\\n    text-decoration: none;\\r\\n    color: black;\\r\\n}\\r\\n\\r\\n.links a {\\r\\n    color: #555;\\r\\n    text-decoration: none;\\r\\n    transition: ease-in 0.2s;\\r\\n    padding-right: 12px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.links a:hover {\\r\\n    color: #1E88E5;\\r\\n    transition: ease-in 0.2s;\\r\\n}\\r\\n\\r\\n.profileIconWrapper {\\r\\n    padding: 0px;\\r\\n    padding-right: 16px;\\r\\n    padding-top: 16px;\\r\\n    font-weight: bold;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbmF2YmFyL25hdmJhci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTtJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osYUFBYTtJQUNiLHNDQUFzQztJQUN0Qyx5QkFBeUI7QUFDN0I7O0FBRUE7SUFDSSxxQkFBcUI7SUFDckIscUNBQW9EO0lBQ3BELHNCQUFzQjtJQUN0QiwwQkFBMEI7SUFDMUIsV0FBVztJQUNYLFlBQVk7SUFDWixlQUFlO0FBQ25COztBQUVBO0lBQ0ksT0FBTztJQUNQLDBCQUEwQjtJQUMxQixZQUFZO0lBQ1osZ0JBQWdCO0lBQ2hCLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixtQkFBbUI7SUFDbkIsbUJBQW1CO0lBQ25CLGNBQWM7QUFDbEI7O0FBRUE7SUFDSSxxQkFBcUI7SUFDckIsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFdBQVc7SUFDWCxxQkFBcUI7SUFDckIsd0JBQXdCO0lBQ3hCLG1CQUFtQjtJQUNuQixnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxjQUFjO0lBQ2Qsd0JBQXdCO0FBQzVCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLG1CQUFtQjtJQUNuQixpQkFBaUI7SUFDakIsaUJBQWlCO0FBQ3JCIiwiZmlsZSI6InNyYy9hcHAvbmF2YmFyL25hdmJhci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi5uYXZCYXIge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxMCUgMTAlIDYwJSAyMCU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRUFFQUVCO1xyXG59XHJcblxyXG4jbG9nbyB7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBiYWNrZ3JvdW5kOiB1cmwoJ3NyYy9hc3NldHMvaW1nL2xvZ28ucG5nJykgbm8tcmVwZWF0O1xyXG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcclxuICAgIG1hcmdpbjogMHB4IDEwcHggMTJweCAxMnB4O1xyXG4gICAgd2lkdGg6IDk2cHg7XHJcbiAgICBoZWlnaHQ6IDk2cHg7XHJcbiAgICBtaW4td2lkdGg6IDk2cHg7XHJcbn1cclxuXHJcbiNoZWFkaW5nIHtcclxuICAgIGZsZXg6IDQ7XHJcbiAgICBwYWRkaW5nOiAyNHB4IDBweCA4cHggMTBweDtcclxuICAgIGhlaWdodDogNjBweDtcclxuICAgIGZvbnQtc2l6ZTogMS44ZW07XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxufVxyXG5cclxuLmxpbmtzIHtcclxuICAgIHBhZGRpbmctdG9wOiAzMnB4O1xyXG4gICAgcGFkZGluZy1yaWdodDogMzBweDtcclxuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxufVxyXG5cclxuI2hlYWRpbmcgPiBhIHtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgIGNvbG9yOiBibGFjaztcclxufVxyXG5cclxuLmxpbmtzIGEge1xyXG4gICAgY29sb3I6ICM1NTU7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgICB0cmFuc2l0aW9uOiBlYXNlLWluIDAuMnM7XHJcbiAgICBwYWRkaW5nLXJpZ2h0OiAxMnB4O1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG5cclxuLmxpbmtzIGE6aG92ZXIge1xyXG4gICAgY29sb3I6ICMxRTg4RTU7XHJcbiAgICB0cmFuc2l0aW9uOiBlYXNlLWluIDAuMnM7XHJcbn1cclxuXHJcbi5wcm9maWxlSWNvbldyYXBwZXIge1xyXG4gICAgcGFkZGluZzogMHB4O1xyXG4gICAgcGFkZGluZy1yaWdodDogMTZweDtcclxuICAgIHBhZGRpbmctdG9wOiAxNnB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbn1cclxuIl19 */\"","module.exports = \"<div class=\\\"navBar\\\">\\r\\n  <div id=\\\"logo\\\"></div>\\r\\n  <div id=\\\"heading\\\"><a routerLink=\\\"/\\\">DeChat</a></div>\\r\\n\\r\\n  <div class=\\\"links\\\">\\r\\n      <!--\\r\\n      <span>\\r\\n        <a *ngIf=\\\"!(user|async)?.uid\\\" href=\\\"#\\\" (click)=\\\"login()\\\">Login</a>\\r\\n      </span>\\r\\n      -->\\r\\n      <!--\\r\\n      <span>\\r\\n        <a *ngIf=\\\"!(user|async)?.uid\\\" routerLink=\\\"/signup\\\">Sign Up</a>\\r\\n      </span>\\r\\n      -->\\r\\n      <!--\\r\\n      <span>\\r\\n        <a *ngIf=\\\"(user|async)?.uid\\\" href=\\\"#\\\" (click)=\\\"logout()\\\">Logout</a>\\r\\n      </span>\\r\\n      -->\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"profileIconWrapper\\\">\\r\\n    <div *ngIf=\\\"showProfileIcon()\\\">\\r\\n      <app-profile-icon></app-profile-icon>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</div>\"","import {Component, OnInit} from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {UserService} from '../services/dechat/user.service';\r\nimport {AuthService} from '../services/solid/solid.auth.service';\r\n\r\n@Component({\r\n    selector: 'app-navbar',\r\n    templateUrl: './navbar.component.html',\r\n    styleUrls: ['./navbar.component.css']\r\n})\r\nexport class NavbarComponent implements OnInit {\r\n\r\n    constructor(private router: Router) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        /*if (this.auth.isSessionActive()) {\r\n          this.userName = this.user.getUserName();\r\n        }*/\r\n    }\r\n\r\n    showProfileIcon(): boolean {\r\n        return this.router.url === '/chat';\r\n    }\r\n\r\n}\r\n","module.exports = \".registration {\\r\\n  text-align: center;\\r\\n  font-family: 'Roboto', sans-serif;\\r\\n}\\r\\n\\r\\n.registration .header-bar {\\r\\n  margin: 0px;\\r\\n  height: 44px;\\r\\n  width: calc(100% + 16px);\\r\\n  background-color: #3D6DEB;\\r\\n  color: #fff;\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n}\\r\\n\\r\\n.registration .header-bar p {\\r\\n  text-align: center;\\r\\n  font-family: 'Roboto', sans-serif;\\r\\n  font-weight: bold;\\r\\n  font-size: 14px;\\r\\n  letter-spacing: 1px;\\r\\n  line-height: 15px;\\r\\n}\\r\\n\\r\\n.registration .header-text {\\r\\n  margin-top:92px;\\r\\n  width: 360px;\\r\\n  margin-left: auto;\\r\\n  margin-right: auto;\\r\\n  font-size: 14px;\\r\\n  color: #666;\\r\\n}\\r\\n\\r\\n.registration .header-text a {\\r\\n  color: #666;\\r\\n  font-size: 12px;\\r\\n}\\r\\n\\r\\n.registration .provider-card-container {\\r\\n  margin-top: 28px;\\r\\n}\\r\\n\\r\\n.registration .provider-card {\\r\\n  height: 140px;\\r\\n  width: 320px;\\r\\n  border: 1px solid #DAE0E6;\\r\\n  border-radius: 2px;\\r\\n  background-color: #fff;\\r\\n  margin: 10px;\\r\\n  display: inline-block;\\r\\n  box-shadow: #DAE0E6 1px 1px 6px;\\r\\n}\\r\\n\\r\\n.registration .provider-card .provider-logo {\\r\\n  height: 44px;\\r\\n  width: 44px;\\r\\n  margin-left: auto;\\r\\n  margin-right: auto;\\r\\n  margin-top: 16px;\\r\\n}\\r\\n\\r\\n.registration .provider-card h2 {\\r\\n  color: #656E75;\\r\\n  font-size: 18px;\\r\\n  margin-top: -2px;\\r\\n  letter-spacing: 0.9px;\\r\\n  line-height: 24px;\\r\\n}\\r\\n\\r\\n.registration .provider-card p {\\r\\n  color: #656E75;\\r\\n  font-size: 12px;\\r\\n  line-height: 16px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVnaXN0ZXIvcmVnaXN0ZXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtFQUNsQixpQ0FBaUM7QUFDbkM7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLHdCQUF3QjtFQUN4Qix5QkFBeUI7RUFDekIsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sT0FBTztBQUNUOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGlDQUFpQztFQUNqQyxpQkFBaUI7RUFDakIsZUFBZTtFQUNmLG1CQUFtQjtFQUNuQixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFlBQVk7RUFDWix5QkFBeUI7RUFDekIsa0JBQWtCO0VBQ2xCLHNCQUFzQjtFQUN0QixZQUFZO0VBQ1oscUJBQXFCO0VBQ3JCLCtCQUErQjtBQUNqQzs7QUFFQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixxQkFBcUI7RUFDckIsaUJBQWlCO0FBQ25COztBQUNBO0VBQ0UsY0FBYztFQUNkLGVBQWU7RUFDZixpQkFBaUI7QUFDbkIiLCJmaWxlIjoic3JjL2FwcC9yZWdpc3Rlci9yZWdpc3Rlci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnJlZ2lzdHJhdGlvbiB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIGZvbnQtZmFtaWx5OiAnUm9ib3RvJywgc2Fucy1zZXJpZjtcclxufVxyXG5cclxuLnJlZ2lzdHJhdGlvbiAuaGVhZGVyLWJhciB7XHJcbiAgbWFyZ2luOiAwcHg7XHJcbiAgaGVpZ2h0OiA0NHB4O1xyXG4gIHdpZHRoOiBjYWxjKDEwMCUgKyAxNnB4KTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjM0Q2REVCO1xyXG4gIGNvbG9yOiAjZmZmO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDA7XHJcbiAgbGVmdDogMDtcclxufVxyXG5cclxuLnJlZ2lzdHJhdGlvbiAuaGVhZGVyLWJhciBwIHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nLCBzYW5zLXNlcmlmO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBsZXR0ZXItc3BhY2luZzogMXB4O1xyXG4gIGxpbmUtaGVpZ2h0OiAxNXB4O1xyXG59XHJcblxyXG4ucmVnaXN0cmF0aW9uIC5oZWFkZXItdGV4dCB7XHJcbiAgbWFyZ2luLXRvcDo5MnB4O1xyXG4gIHdpZHRoOiAzNjBweDtcclxuICBtYXJnaW4tbGVmdDogYXV0bztcclxuICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIGNvbG9yOiAjNjY2O1xyXG59XHJcblxyXG4ucmVnaXN0cmF0aW9uIC5oZWFkZXItdGV4dCBhIHtcclxuICBjb2xvcjogIzY2NjtcclxuICBmb250LXNpemU6IDEycHg7XHJcbn1cclxuXHJcbi5yZWdpc3RyYXRpb24gLnByb3ZpZGVyLWNhcmQtY29udGFpbmVyIHtcclxuICBtYXJnaW4tdG9wOiAyOHB4O1xyXG59XHJcblxyXG4ucmVnaXN0cmF0aW9uIC5wcm92aWRlci1jYXJkIHtcclxuICBoZWlnaHQ6IDE0MHB4O1xyXG4gIHdpZHRoOiAzMjBweDtcclxuICBib3JkZXI6IDFweCBzb2xpZCAjREFFMEU2O1xyXG4gIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xyXG4gIG1hcmdpbjogMTBweDtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgYm94LXNoYWRvdzogI0RBRTBFNiAxcHggMXB4IDZweDtcclxufVxyXG5cclxuLnJlZ2lzdHJhdGlvbiAucHJvdmlkZXItY2FyZCAucHJvdmlkZXItbG9nbyB7XHJcbiAgaGVpZ2h0OiA0NHB4O1xyXG4gIHdpZHRoOiA0NHB4O1xyXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gIG1hcmdpbi1yaWdodDogYXV0bztcclxuICBtYXJnaW4tdG9wOiAxNnB4O1xyXG59XHJcblxyXG4ucmVnaXN0cmF0aW9uIC5wcm92aWRlci1jYXJkIGgyIHtcclxuICBjb2xvcjogIzY1NkU3NTtcclxuICBmb250LXNpemU6IDE4cHg7XHJcbiAgbWFyZ2luLXRvcDogLTJweDtcclxuICBsZXR0ZXItc3BhY2luZzogMC45cHg7XHJcbiAgbGluZS1oZWlnaHQ6IDI0cHg7XHJcbn1cclxuLnJlZ2lzdHJhdGlvbiAucHJvdmlkZXItY2FyZCBwIHtcclxuICBjb2xvcjogIzY1NkU3NTtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgbGluZS1oZWlnaHQ6IDE2cHg7XHJcbn1cclxuIl19 */\"","module.exports = \"<div class=\\\"registration\\\">\\r\\n  <!-- Header Bar -->\\r\\n  <div class=\\\"header-bar\\\">\\r\\n    <p>Select Solid Identity Provider</p>\\r\\n  </div>\\r\\n\\r\\n  <!-- Header Text -->\\r\\n  <div class=\\\"header-text\\\">\\r\\n    <p>\\r\\n      With a Solid Identity your personal data is stored securely in a POD. You control who has access to it.\\r\\n    </p>\\r\\n    <a href=\\\"https://solid.mit.edu\\\" target=\\\"_blank\\\">\\r\\n      Learn more about Solid IDs and PODs\\r\\n    </a>\\r\\n  </div>\\r\\n\\r\\n  <!-- Provider cards -->\\r\\n  <div class=\\\"provider-card-container\\\">\\r\\n    <div class=\\\"provider-card\\\" *ngFor=\\\"let provider of availableProviders\\\">\\r\\n      <img [src]=\\\"provider.image\\\" class=\\\"provider-logo\\\">\\r\\n      <h2>{{ provider.name }}</h2>\\r\\n      <p>{{ provider.desc }}</p>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\"","import {Component, OnInit} from '@angular/core';\r\nimport {AuthService} from '../services/solid/solid.auth.service';\r\n\r\n@Component({\r\n    selector: 'app-register',\r\n    templateUrl: './register.component.html',\r\n    styleUrls: ['./register.component.css']\r\n})\r\nexport class RegisterComponent implements OnInit {\r\n    availableProviders: any[];\r\n\r\n    constructor(private auth: AuthService) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.availableProviders = this.auth.getIdentityProviders();\r\n        this.availableProviders = this.availableProviders.filter((idp) => idp.providerLoginUrl !== null);\r\n    }\r\n\r\n}\r\n","import {Injectable} from '@angular/core';\r\n\r\nimport { ChatMessage } from 'src/app/models/dechat/chat-message.model';\r\nimport { User } from 'src/app/models/dechat/user.model';\r\nimport { Observable, of } from 'rxjs';\r\nimport { ChatInfo } from 'src/app/models/dechat/chat-info.model';\r\nimport { UserService } from './user.service';\r\nimport { FilesService } from './files.service';\r\nimport { MessageService } from './message.service';\r\nimport { InboxService } from './inbox.service';\r\n\r\nimport { v4 as uuid } from 'uuid';\r\nimport { InboxElement, InboxElementType } from 'src/app/models/dechat/inbox-element.model';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ChatService {\r\n\r\n    // Attributes //\r\n    user: User;\r\n    userName: Observable<string>;\r\n\r\n    allChats: ChatInfo[];\r\n    currentChat: ChatInfo;\r\n\r\n\r\n    // Constructor //\r\n    constructor(\r\n        private userService : UserService,\r\n        private files : FilesService,\r\n        private messages : MessageService,\r\n        private inbox : InboxService\r\n    ) {  \r\n\r\n        this.allChats = [];\r\n        this.setUp();\r\n\r\n        this.inbox.addOnElementFoundCallback(\r\n            (element : InboxElement) => {\r\n                if (element.type == InboxElementType.CHAT_REQUEST)\r\n                    this.createChatFromRequest(element);\r\n            });\r\n    }\r\n\r\n\r\n\r\n    async setUp() {\r\n\r\n        await 1;\r\n        this.user = await this.userService.getUser();\r\n        this.messages.setCurrentUser(this.user);\r\n        var contacts = await this.userService.getContacts();\r\n        \r\n        await this.files.checkUserFiles(this.user);\r\n\r\n        console.log(\"Checking existent chats...\");\r\n        \r\n        var chatFolder = await this.files.getChatsRootUrl(this.user);\r\n        var chats = await this.files.readFolderSubfolders(chatFolder);\r\n        await chats.forEach(async chat => {\r\n            var c = await this.fetchChat(chat);\r\n            if (c != null)\r\n                this.allChats.push(c);\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    // Given a ChatInfo object, we will open the chat\r\n    async openChat(chatInfo: ChatInfo) : Promise<void> {\r\n\r\n        this.messages.setCurrentChat(chatInfo);\r\n        this.currentChat = chatInfo;\r\n\r\n        // Update file system\r\n        this.files.checkChatFolder(this.user, chatInfo);\r\n    }\r\n\r\n    getAllChats(): Observable<ChatInfo[]> {\r\n        return of(this.allChats);\r\n    }\r\n\r\n\r\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n    /*                                                           */\r\n    /*                 CHAT CREATION AND EDITION                 */\r\n    /*                                                           */\r\n\r\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n\r\n    isAdmin(chat: ChatInfo): boolean {\r\n        return chat.administrators.includes(this.user);\r\n    }\r\n\r\n\r\n    /*\r\n    * Normal chats behave the same as group chats, so\r\n    * we create a group chat with just both this user and\r\n    * the other one.\r\n    */\r\n    async createChat(otherUser: User): Promise<ChatInfo> {\r\n        var users = [];\r\n        users.push(otherUser);\r\n        return this.createGroupChat(otherUser.nickname, users);\r\n    }\r\n\r\n\r\n    private async createChatFromRequest(request: InboxElement): Promise<ChatInfo> {\r\n        \r\n        var chat : ChatInfo = request.chat;//JSON.parse(file);\r\n        this.allChats.push(chat);\r\n        await this.files.checkChatFolder(this.user, chat);\r\n        return chat;\r\n    }\r\n    \r\n\r\n    async createGroupChat(chatName: string, otherUsers: User[]): Promise<ChatInfo> {\r\n        console.log(\"Chat service creating new chat: \" + chatName);\r\n        let chat: ChatInfo;\r\n\r\n        var id : string = uuid();\r\n        id = id.replace(/-/g, '');\r\n        console.log(\"New chat id: \" + id);\r\n\r\n        chat = new ChatInfo(id);\r\n        chat.chatName = chatName;\r\n        chat.users = otherUsers;\r\n        chat.administrators = [];\r\n        chat.administrators.push(this.user);\r\n        chat.users.push(this.user);\r\n\r\n        chat.users.forEach(async user => {\r\n            if (user !== this.user)\r\n                this.inbox.sendChatRequest(user, chat);\r\n        });\r\n\r\n        await this.files.checkChatFolder(this.user, chat);\r\n\r\n        return chat;\r\n    }\r\n\r\n\r\n    addUserToChat(chat: ChatInfo, user: User) : boolean {\r\n        if (!this.isAdmin(chat))\r\n            return false;\r\n\r\n        chat.users.push(this.user);\r\n        this.files.checkChatFolder(this.user, chat);\r\n        return true;\r\n    }\r\n\r\n\r\n    \r\n\r\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n    /*                                                           */\r\n    /*                        CHAT FETCHING                      */\r\n    /*                                                           */\r\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n\r\n    async fetchChat(chatUrl : string) : Promise<ChatInfo> {\r\n        console.log(\"Fetching chat: \" + chatUrl);    \r\n        var chat : ChatInfo;\r\n        var id = chatUrl;\r\n\r\n        // Get the chat data file, with name and users\r\n\r\n        var dataFile = chatUrl + \"data.txt\";\r\n        var file = await this.files.readFile(dataFile);\r\n        \r\n        if (file.length == 0 ||file == undefined) {\r\n            console.log(\"Something bad happened.\");\r\n            this.files.deleteFolder(chatUrl);\r\n            return null;\r\n        }\r\n        var chat : ChatInfo = JSON.parse(file);\r\n        if (chat == undefined) {\r\n            console.log(\"Something bad happened.\");\r\n            this.files.deleteFolder(chatUrl);\r\n            return null;\r\n        }\r\n\r\n        // Load messages\r\n        await this.messages.fetchChat(chat);\r\n\r\n        return chat;\r\n    }\r\n\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport * as solidFiles from 'solid-file-client';\r\nimport {ChatInfo} from 'src/app/models/dechat/chat-info.model';\r\nimport {User} from 'src/app/models/dechat/user.model';\r\nimport {RdfService} from '../solid/rdf.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class FilesService {\r\n\r\n    //\r\n    //  ALL INFO NEEDED FOR THIS SERVICE:\r\n    //\r\n    //  https://github.com/jeff-zucker/solid-file-client\r\n    //\r\n\r\n    constructor(private rdf: RdfService) {\r\n    }\r\n\r\n    getRoot(user: User) {\r\n        return user.url.replace('/profile/card#me', '/private/dechat_en1a/');\r\n    }\r\n\r\n    async checkUserFiles(user: User) {\r\n        await this.rdf.getSession();\r\n\r\n        const userFolder = user.url.replace('/profile/card#me', '/private/');\r\n        const inboxFolder = user.url.replace('/profile/card#me', '/inbox/');\r\n\r\n        //this.readFile(user.url.replace('/profile/card#me', \"/.acl\"));\r\n        //this.readFile(inboxFolder + \".acl\");\r\n\r\n        this.checkFolderExistence(inboxFolder);\r\n        this.checkFolderExistence(userFolder).then(then =>\r\n          this.checkFolderExistence(userFolder + \"dechat_en1a/\").then( then =>\r\n            this.checkFolderExistence(userFolder + \"dechat_en1a/chats/\")\r\n          )\r\n        );\r\n    }\r\n  \r\n\r\n  // Checks if a folder exists.\r\n  // If not, it will create a folder with the requested url.\r\n  async checkFolderExistence(url : string, onError = (err) => {}) {\r\n    await this.rdf.getSession();\r\n    try {\r\n      solidFiles.readFolder(url).then(\r\n        (success: any) => { console.log('Existent folder!'); }, \r\n        (error: any) => {\r\n            console.log('Non existent folder. Creating new one...');\r\n            this.createFolder(url).then(onError);\r\n        });\r\n    }\r\n    catch (error) {\r\n      console.log(`Error creating folder: ${error}`);\r\n    }    \r\n  }\r\n\r\n\r\n  /*\r\n    It will check the existance of the chat folder and, inside\r\n    that folder, the existance of the chat data file.\r\n  */\r\n  async checkChatFolder(user: User, chat : ChatInfo) {\r\n    await this.rdf.getSession();\r\n\r\n    var path = this.getChatUrl(user, chat);\r\n    \r\n    var error = (e) => { // TO be executed if the file doesn't exist yet\r\n      this.checkChatDataFile(path, chat);\r\n      this.givePermissions(path, user);\r\n    }\r\n\r\n    await this.checkFolderExistence(path, error);\r\n     \r\n  }\r\n\r\n  private checkChatDataFile(path : string, chat : ChatInfo) {\r\n      var filename = path + \"data.txt\";\r\n      var json = JSON.stringify(chat);\r\n      this.updateFile(filename, json);\r\n  }\r\n\r\n\r\n\r\n  getChatsRootUrl(user: User) : string {\r\n    return this.getRoot(user) + \"chats/\";\r\n  }\r\n\r\n\r\n  getChatUrl(user: User, chat : ChatInfo) : string {\r\n    var userFolder = this.getRoot(user) + \"chats/\";\r\n    var url = userFolder + chat.chatId + \"/\";\r\n    console.log(\"Chat url = \" + url);\r\n    return url;\r\n  }\r\n\r\n  getInboxUrl(user: User) : string {\r\n    return user.url.replace('/profile/card#me', '/inbox/');\r\n  }\r\n\r\n\r\n  async createFolder(url: String) {\r\n    await solidFiles.createFolder(url).then(\r\n      (success: any) => { console.log(`Created folder ${url}.`); },\r\n      (error: any) => { console.log('Could not create folder: ' + error) }\r\n    );\r\n  }\r\n\r\n  async createFile(url: string, str: string = null) {\r\n    await solidFiles.createFile(url).then(\r\n      (success: any) => { \r\n        console.log(`Created file ${url}.`);\r\n        if (str != null)\r\n          this.updateFile(url, str);\r\n      },\r\n      (error: any) => { console.log('Could not create file: ' + error) }\r\n    );\r\n  }\r\n\r\n  async updateFile(url: string, str: string) {\r\n    await solidFiles.updateFile(url, str).then(\r\n      (success: any) => { console.log(\"File edited!\"); },\r\n      (error: any) => { \r\n        //console.log(\"Could not edit file: \" + error)\r\n        this.createFile(url, str);\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n\r\n  async readFile(url: string) : Promise<string> {\r\n    var result = \"\";\r\n    await solidFiles.readFile(url).then(  body => {\r\n      console.log(`File content is : ${body}.`);\r\n      result = body;\r\n    }, err => console.log(err) );\r\n    return result;\r\n  }\r\n\r\n  deleteFile(url: string) {\r\n    solidFiles.deleteFile(url).then(\r\n        success => { console.log(`Deleted ${url}.`); },\r\n        err => console.log(err)\r\n      );\r\n  }\r\n\r\n\r\n  async readFolder(url: string): Promise<string[]> {\r\n    \r\n    let result = [];    \r\n    await solidFiles.readFolder(url).then(\r\n      folder => { result = folder.files.map((f) => f.url); },\r\n      err => console.log(err)\r\n    );\r\n    return result;\r\n  }\r\n\r\n  deleteFolder(url: string) {\r\n    solidFiles.deleteFolder(url).then(\r\n        success => { console.log(`Deleted ${url}.`); },\r\n        err => console.log(err)\r\n      );\r\n  }\r\n\r\n\r\n  async readFolderSubfolders(url: string) : Promise<string[]> {\r\n    \r\n    var result = [];\r\n    await solidFiles.readFolder(url).then(\r\n      folder => { result = folder.folders.map(f => f.url); },\r\n      err => console.log(err)\r\n    );\r\n    return result;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n     \r\n  async givePermissions(path: string, owner: User) {\r\n    const webId = owner.url;//.replace('#me', '#');\r\n    const acl =\r\n          `# ACL resource for the profile folder\r\n          @prefix acl: <http://www.w3.org/ns/auth/acl#>.\r\n          @prefix foaf: <http://xmlns.com/foaf/0.1/>.\r\n          \r\n          # The owner has all permissions\r\n          <#owner>\r\n              a acl:Authorization;\r\n              acl:agent <${webId}>;\r\n              acl:accessTo <./>;\r\n              acl:defaultForNew <./>;\r\n              acl:mode acl:Read, acl:Write, acl:Control.\r\n          \r\n          # The public has read permissions\r\n          <#public>\r\n              a acl:Authorization;\r\n              acl:agentClass foaf:Agent;\r\n              acl:accessTo <./>;\r\n              acl:defaultForNew <./>;\r\n              acl:mode acl:Read.`;\r\n  \r\n    path += '.acl';\r\n    this.readFile(path);\r\n    solidFiles.updateFile(path, acl).then((success: any) => {\r\n      console.log('Folder permisions added');\r\n    }, (err: string) => console.log('Could not set folder permisions' + err));\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  // Process the .acl file to give premissions to a new user\r\n  // Work in prograss\r\n  private addUserToAclFile(str : string, newUser: User) {\r\n\r\n    var webId = newUser.url;\r\n    var lines : string[] = str.split(\"\\n\");\r\n\r\n    // First check the @prefixes //\r\n    var lastPrefixLine = 0;\r\n    var prefixes = lines.filter((str, index, array) => {\r\n      if (str.startsWith(\"@prefix\")) {\r\n        lastPrefixLine = index;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n\r\n\r\n    // Check w3.org auth acl\r\n    var isW3Added = false;\r\n    var w3 = \"http://www.w3.org/ns/auth/acl#\";\r\n    for (var i = 0; i < prefixes.length; i ++) {\r\n      if (prefixes[i].includes(w3)) {\r\n        isW3Added = true;\r\n        break;\r\n      }\r\n    }    \r\n    if (!isW3Added) {\r\n      var prefix = `@prefix n0: <${w3}>.\\n`;\r\n      lines.splice(lastPrefixLine, 0 /*no removing!*/, prefix);\r\n      lastPrefixLine ++;\r\n    }\r\n\r\n    // Check user prefix added\r\n    var isUserAdded = false;\r\n    for (var i = 0; i < prefixes.length; i ++) {\r\n      if (prefixes[i].includes(webId)) {\r\n        isUserAdded = true;\r\n        break;\r\n      }\r\n    }    \r\n    if (!isUserAdded) {\r\n      var prefix = `@prefix c0: <${webId}>.\\n`;\r\n      lines.splice(lastPrefixLine, 0 /*no removing!*/, prefix);\r\n    }\r\n\r\n\r\n    // Now add the :Read permission //\r\n    var readIndex = lines.findIndex((str, index, array) => str.startsWith(\":Read\"));\r\n    if (readIndex == -1) {\r\n      readIndex = lines.length;\r\n      lines.push(\":Read\\n\");\r\n      lines.push(\"a n0:Authorization;\\n\");\r\n      lines.push(\"n0:accessTo <./>:;\\n\");\r\n      lines.push(\"n0:defaultForNew <./>:;\\n\");\r\n      lines.push(\"n0:mode n0:Read.`;\\n\");\r\n\r\n      lines.push(\"n0:agent c0:me;\\n\");\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { FilesService } from './files.service';\r\nimport { UserService } from './user.service';\r\nimport { User } from 'src/app/models/dechat/user.model';\r\nimport { InboxElement, InboxElementType } from 'src/app/models/dechat/inbox-element.model';\r\nimport { ChatInfo } from 'src/app/models/dechat/chat-info.model';\r\nimport { ChatService } from './chat.service';\r\nimport { ChatMessage } from 'src/app/models/dechat/chat-message.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InboxService {\r\n\r\n  private user : User;\r\n  private newElements : InboxElement[];\r\n\r\n  private onElementFoundCallbacks;\r\n\r\n\r\n  constructor(\r\n    private files : FilesService,\r\n    private users : UserService\r\n  ) {\r\n    this.newElements = [];\r\n    this.onElementFoundCallbacks = [];\r\n    this.setUp();\r\n  }\r\n\r\n\r\n  private async setUp() {\r\n    await 4;\r\n\r\n    console.log(\"Inbox setting up...\");\r\n    this.user = await this.users.getUser();\r\n    setInterval(this.checkInbox.bind(this), 500/*2000*/);\r\n  }\r\n\r\n\r\n  addOnElementFoundCallback(callback) {\r\n    this.onElementFoundCallbacks.push(callback);\r\n  }\r\n\r\n\r\n  // This function is called periodically.\r\n  // It checks if there exist new files in the inbox.\r\n  private async checkInbox() {\r\n\r\n    if (this.user == undefined) {\r\n      this.user = await this.users.getUser();\r\n      return;\r\n    }\r\n\r\n    // Read files in inbox\r\n    var url = this.files.getInboxUrl(this.user);\r\n    var newFiles = [];\r\n    var folder = await this.files.readFolder(url).then(\r\n      result => {\r\n\r\n        newFiles = result.filter((str, index, array) => str.includes(\"DeChatEn1a\"));\r\n        console.log(\"INBOX HAS \" + newFiles.length + \" FILES\");\r\n        this.addInboxFiles(newFiles);\r\n    });\r\n\r\n    // Process new elements\r\n    this.processNewElements();\r\n  }\r\n\r\n\r\n\r\n\r\n  private processNewElements() {\r\n    this.newElements.forEach( element => {\r\n      this.onElementFoundCallbacks.forEach(callback => { callback(element); });\r\n    });\r\n    this.newElements = [];\r\n  }\r\n\r\n\r\n\r\n  // Takes an array of urls and processes the requests\r\n  private async addInboxFiles(files : string[]) {\r\n\r\n    for (var i = 0; i < files.length; i ++) {\r\n\r\n        var file = await this.files.readFile(files[i]);    \r\n        if (file.length > 0) {\r\n            var inboxElement : InboxElement = JSON.parse(file);\r\n            this.newElements.push(inboxElement);\r\n            console.log(\"Inbox element pushed: \" + inboxElement)\r\n        }\r\n        this.files.deleteFile(files[i]);\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n  /*                                                           */\r\n  /*                         REQUESTS                          */\r\n  /*                                                           */\r\n  /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n\r\n\r\n\r\n  public sendChatRequest(toUser: User, chat: ChatInfo) {\r\n\r\n    var request : InboxElement;\r\n    request = new InboxElement();\r\n    request.chat = chat;\r\n    request.type = InboxElementType.CHAT_REQUEST;\r\n\r\n    var inboxUrl = this.files.getInboxUrl(toUser);\r\n    var filename = inboxUrl + \"DeChatEn1a_chatreq_\" + chat.chatId + \".txt\";\r\n\r\n    this.sendRequest(request, filename);\r\n  }\r\n\r\n\r\n  public sendNewMessage(toUser: User, chat : ChatInfo, message : ChatMessage) {\r\n\r\n    var request : InboxElement;\r\n    request = new InboxElement();\r\n    request.chat = chat;\r\n    request.message = message;\r\n    request.type = InboxElementType.NEW_MESSAGE;\r\n\r\n    var inboxUrl = this.files.getInboxUrl(toUser);\r\n    var filename = inboxUrl + \"DeChatEn1a_newmsg_\" + message.id + \".txt\";\r\n\r\n    this.sendRequest(request, filename);\r\n  }\r\n\r\n\r\n  private sendRequest(inboxElement : InboxElement, filename: string) {\r\n    \r\n    console.log(\"Sending request...\")\r\n    var text = JSON.stringify(inboxElement);\r\n    this.files.createFile(filename, text);\r\n  }\r\n\r\n\r\n}","import {Injectable} from '@angular/core';\r\nimport {Observable, of} from 'rxjs';\r\nimport {ChatInfo} from 'src/app/models/dechat/chat-info.model';\r\nimport {ChatMessage} from 'src/app/models/dechat/chat-message.model';\r\nimport {MessageBundle} from 'src/app/models/dechat/message-bundle.model';\r\nimport {User} from 'src/app/models/dechat/user.model';\r\nimport {FilesService} from './files.service';\r\nimport { InboxService } from './inbox.service';\r\nimport { InboxElement, InboxElementType } from 'src/app/models/dechat/inbox-element.model';\r\nimport { Chat } from 'src/app/models/dechat/chat.model';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class MessageService {\r\n\r\n\r\n    // Huge TODO here\r\n    //\r\n    // Now we are working with json-encoded plain text.\r\n    // This will have to change and use RDF.\r\n    //\r\n\r\n\r\n    user: User;\r\n    chatMessage: ChatMessage;\r\n\r\n    currentChat: Chat;\r\n    currentMessages: ChatMessage[];\r\n    currentBundle: MessageBundle;\r\n    currentChatUrl: string;\r\n\r\n\r\n    // We will store the chats locally in a hash map\r\n    // string -> ChatInfo.chatId\r\n    chatMap: Map<string, Chat>;\r\n\r\n    constructor(\r\n        private files: FilesService,\r\n        private inbox : InboxService\r\n    ) {\r\n\r\n        this.currentMessages = [];\r\n        this.chatMap = new Map<string, Chat>();\r\n\r\n        this.inbox.addOnElementFoundCallback(\r\n            (element : InboxElement) => {\r\n                if (element.type == InboxElementType.NEW_MESSAGE)\r\n                    this.createMessageFromRequest(element);\r\n            });\r\n    }\r\n\r\n    setCurrentUser(user: User) {\r\n        this.user = user;\r\n    }\r\n\r\n\r\n    async fetchChat(chatInfo : ChatInfo) {\r\n\r\n        console.log(\"Message Service Fetching chat: \" + chatInfo.chatId);\r\n\r\n        if (!this.chatMap.has(chatInfo.chatId)) {\r\n            this.chatMap.set(chatInfo.chatId, new Chat(chatInfo));\r\n        }\r\n        var chat = this.chatMap.get(chatInfo.chatId);\r\n        var chatUrl = this.files.getChatUrl(this.user, chatInfo);\r\n        await this.loadAllMessageBundles(chatUrl, chat);\r\n    }\r\n\r\n\r\n\r\n    async setCurrentChat(chatInfo: ChatInfo) {\r\n\r\n        console.log(\"Message service setting current chat\");\r\n\r\n        // Clear messages of the previous chat\r\n        while (this.currentMessages.length > 0) {\r\n            this.currentMessages.pop();\r\n        }        \r\n        \r\n        if (!this.chatMap.has(chatInfo.chatId)) {\r\n            this.chatMap.set(chatInfo.chatId, new Chat(chatInfo));\r\n        }\r\n        this.currentChat = this.chatMap.get(chatInfo.chatId);\r\n        this.currentChatUrl = this.files.getChatUrl(this.user, chatInfo);\r\n        \r\n\r\n        // Fetch the bundles up in the pod (add them to the map)\r\n        // And retrieve the existing bundles in the map\r\n        var newBundles = await this.loadAllMessageBundles(this.currentChatUrl, this.currentChat);\r\n        \r\n        console.log(\"New bundles added: \" + newBundles)\r\n        var bundles = this.currentChat.getBundles();\r\n\r\n        if (bundles.length == 0)\r\n            console.log(\"... man, the chat has no bundles\");\r\n\r\n        await bundles.forEach((b) => {\r\n            console.log(\"Bundle \" + b.bundleId + \" has \" + b.messages.length + \" messages\");\r\n            // Sort them by date\r\n            b.messages = b.messages.sort((a, b) => a.date.getTime() - b.date.getTime());\r\n            b.messages.forEach((m) => this.currentMessages.push(m));\r\n            this.currentBundle = b;\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    getFullTimeStamp() {\r\n        const now = new Date();\r\n\r\n        const date = now.getUTCFullYear() + '_' +\r\n            (now.getUTCMonth() + 1) + '_' +\r\n            now.getUTCDate();\r\n\r\n        const time = now.getUTCHours() + '_' +\r\n            now.getUTCMinutes() + '_' +\r\n            now.getSeconds() + '_' +\r\n            now.getMilliseconds();\r\n\r\n        return date + ' ' + time;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n    /*                                                           */\r\n    /*                     MESSAGE MANAGEMENT                    */\r\n    /*                                                           */\r\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n\r\n    getMessages(): Observable<ChatMessage[]> {\r\n        return of(this.currentMessages);\r\n    }\r\n\r\n    async sendMessage(msg: string) {\r\n\r\n        // No bundle!!\r\n        if (this.currentBundle == undefined)\r\n            this.currentBundle = await this.createBundle(this.currentChat, this.getFullTimeStamp());\r\n        \r\n        const message = this.createMessage(msg);\r\n\r\n        \r\n        // Add the message to the bundle.\r\n        // Create a new bundle if the current one is full\r\n        if (!this.currentBundle.addMessage(message)) {\r\n            this.currentBundle = await this.createBundle(this.currentChat, this.getFullTimeStamp());\r\n            this.currentBundle.addMessage(message);\r\n        }\r\n\r\n        // Push it so we can see it instantly\r\n        this.currentMessages.push(message);\r\n\r\n        // Send to the inbox of all users\r\n        this.currentChat.chatInfo.users.forEach(async (user) => {\r\n            this.inbox.sendNewMessage(user, this.currentChat.chatInfo, message);\r\n        });\r\n\r\n        console.log('[Message sent] : ' + msg);\r\n    }\r\n\r\n    private createMessage(msg: string): ChatMessage {\r\n        const message = new ChatMessage();\r\n        message.message = msg;\r\n        message.userName = this.user.userName;\r\n        message.chatId = this.currentChat.chatInfo.chatId;\r\n        message.bundleId = this.currentBundle.bundleId;\r\n        return message;\r\n    }\r\n\r\n\r\n\r\n    private async createMessageFromRequest(request: InboxElement) {\r\n        \r\n        var msg : ChatMessage = request.message;\r\n        var chatInfo : ChatInfo = request.chat;\r\n\r\n        if (this.currentChat == undefined) {\r\n            // TODO Increase the unread icon on the chat\r\n            // and create it\r\n            console.log(\"Undefined current chat!!!!\")\r\n        }\r\n        // Push it so we can see it\r\n        else if (this.currentChat.chatInfo.chatId == chatInfo.chatId) {\r\n            var existentMsg = this.currentMessages.find((m, index, array) => m.id == msg.id);\r\n            if (existentMsg == undefined)\r\n                this.currentMessages.push(msg);\r\n        }\r\n        else {\r\n            this.currentChat.unreadMessageCount ++;\r\n        }\r\n\r\n        \r\n        if (!this.chatMap.has(msg.chatId)) {\r\n            console.log(\"[ERROR] We have received a message and we don't have the chat in the map!!!!!!\");\r\n            // TODO add it to the chat map\r\n            return;\r\n        }\r\n\r\n        \r\n        var chat = this.chatMap.get(msg.chatId);\r\n        var bundle = await chat.getBundle(msg.bundleId);\r\n        \r\n        if (bundle == undefined) {\r\n            console.log(\"Undefined bundle. Creating it.\");\r\n            this.currentBundle = await this.createBundle(chat, msg.bundleId);\r\n            bundle = this.currentBundle;\r\n        }\r\n\r\n        bundle.addMessage(msg);\r\n\r\n        // Create the message file in the pod        \r\n        var path = await this.files.getChatUrl(this.user, this.currentChat.chatInfo);\r\n        path = path + bundle.bundleId + '/';\r\n        path = path + msg.id + '.txt';\r\n        await this.files.createFile(path, JSON.stringify(msg));\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    private async getMessageFromFile(url: string): Promise<ChatMessage> {\r\n        let msg;\r\n        let json;\r\n        await this.files.readFile(url).then((body) => json = JSON.parse(body));\r\n\r\n        // Get all the message data, I guess\r\n        msg = new ChatMessage(json.message);\r\n        return msg;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n    /*                                                           */\r\n    /*                     BUNDLE MANAGEMENT                     */\r\n    /*                                                           */\r\n    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\r\n\r\n\r\n\r\n    // Looks at the message bundles in the pod, adds them\r\n    // to the map and returns how many of them are new\r\n    async loadAllMessageBundles(chatUrl : string, chat: Chat) : Promise<number>{\r\n\r\n        console.log(\"Loading all message bundles in the POD chat folder \" + chatUrl);\r\n        var bundleFolders : string[] = await this.files.readFolderSubfolders(chatUrl);\r\n\r\n        if (bundleFolders.length == 0) {\r\n            console.log(\"The chat has no bundles\");\r\n            return 0;\r\n        }\r\n        console.log(\"Number of bundles in the POD: \" + bundleFolders.length);\r\n        console.log(\"Number of bundles locally: \" + chat.getBundles().length);\r\n\r\n        // TODO some async shit is happening here.\r\n        // Gotta find a way to fix it.\r\n\r\n        //bundleFolders = bundleFolders.sort((a, b) => a > b ? 1 : (a == b ? 0 : -1));\r\n        var count = 0;\r\n        await bundleFolders.forEach(async b => {\r\n            var result = await this.loadMessageBundle(chat, chatUrl, b);\r\n            console.log(\"Trying to add bundle\");\r\n            if (await chat.addBundle(result)) {\r\n                count ++;\r\n                console.log(\"Bundle added :D\");\r\n            }\r\n            console.log(\"Count = \" + count);\r\n        });\r\n        \r\n        return count;\r\n    }\r\n\r\n    // Fetches all the messages in a given bundle.\r\n    // Returns the bundle object.\r\n    private async loadMessageBundle(chat : Chat, chatUrl: string, bundleUrl: string) : Promise<MessageBundle>{\r\n\r\n        console.log(\"Fetching message bundle.\");\r\n        var bundleId = bundleUrl.replace(chatUrl, '').replace('/', '');\r\n\r\n        console.log(\"URL: \" + bundleUrl);\r\n        console.log(\"ID: \" + bundleId);\r\n\r\n        console.log(\"Getting the bundle.\");\r\n        var bundle = await this.getBundle(chat, bundleId);\r\n\r\n        // Read all messages inside the bundle folder\r\n        console.log(\"Reading all messages inside the bundle folder\");\r\n        var messageFiles = await this.files.readFolder(bundleUrl);\r\n        await messageFiles.forEach(async (f) => {\r\n                var msg = await this.getMessageFromFile(f); \r\n                await bundle.addMessage(msg);\r\n            });\r\n\r\n        return bundle;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    private async getBundle(chat : Chat, bundleId: string): Promise<MessageBundle> {\r\n        var bundle = chat.getBundle(bundleId);\r\n        if (bundle != undefined)\r\n            return bundle;\r\n        return await this.createBundle(chat, bundleId);\r\n    }\r\n\r\n    private async createBundle(chat : Chat, id: string): Promise<MessageBundle> {\r\n\r\n        const bundle = new MessageBundle(chat.chatInfo.chatId, id);\r\n        const path = await this.files.getChatUrl(this.user, chat.chatInfo);\r\n        await this.files.checkFolderExistence(path + bundle.bundleId + '/');\r\n        //this.chatMap.get(chatId).addBundle(bundle);\r\n        return bundle;\r\n    }\r\n\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {Observable, of} from 'rxjs';\r\nimport {User} from 'src/app/models/dechat/user.model';\r\nimport {SolidProfile} from 'src/app/models/solid/solid-profile.model';\r\nimport {RdfService} from '../solid/rdf.service';\r\nimport {AuthService} from '../solid/solid.auth.service';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class UserService {\r\n\r\n    private profile: SolidProfile;\r\n    private loadingProfile: boolean;\r\n    private profileLoaded: boolean;\r\n\r\n    private user: User;\r\n    private contacts: User[];\r\n\r\n    constructor(private rdf: RdfService, private auth: AuthService) {\r\n\r\n        console.log('User service constructor');\r\n        this.user = null;\r\n        this.loadingProfile = true;\r\n        this.profileLoaded = false;\r\n        this.contacts = [];\r\n        this.loadProfile();\r\n\r\n        // Clear cached profile data\r\n        // TODO: Remove this code and find a better way to get the old data\r\n        localStorage.removeItem('oldProfileData');\r\n    }\r\n\r\n    // Loads the profile from the rdf service and handles the response\r\n    async loadProfile() {\r\n\r\n        if (this.profileLoaded) {\r\n            return;\r\n        }\r\n\r\n        if (!this.loadingProfile) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            this.loadingProfile = true;\r\n            const profile = await this.rdf.getProfile();\r\n            if (profile) {\r\n                this.profile = profile;\r\n                this.auth.saveOldUserData(profile);\r\n            }\r\n\r\n            this.loadingProfile = false;\r\n            this.profileLoaded = true;\r\n            if (this.profile) {\r\n                this.setupFromProfile();\r\n            } else {\r\n                this.setupDefault();\r\n            }\r\n\r\n        } catch (error) {\r\n            console.log(`Error: ${error}`);\r\n        }\r\n    }\r\n\r\n    private setupFromProfile() {\r\n\r\n        this.user = new User(this.rdf.getWebID());\r\n        this.user.url = this.rdf.getWebID();\r\n        this.user.userName = this.profile.fn;\r\n        this.user.status = 'online';\r\n        this.user.profileImage = this.profile.image ? this.profile.image : '/assets/images/profile.png';\r\n        this.loadContacts();\r\n    }\r\n\r\n    private setupDefault() {\r\n        console.log('UserService failed fetching user data. Loading default user.');\r\n        this.user = new User('');\r\n    }\r\n\r\n    private async loadContacts() {\r\n        console.log('Fetching contacts...');\r\n\r\n        const contacts = await this.rdf.getContacts();\r\n        console.log('Contact count = ' + contacts.length);\r\n\r\n        while (this.contacts.length > 0) {\r\n            this.contacts.pop();\r\n        }\r\n\r\n        contacts.forEach((element) => {\r\n            const c = new User(element.value);\r\n            this.contacts.push(c);\r\n        });\r\n    }\r\n\r\n    async getUser(): Promise<User> {\r\n        await this.loadProfile();\r\n        return this.user;\r\n    }\r\n\r\n    async getUserName(): Promise<string> {\r\n        await this.loadProfile();\r\n        return this.user.userName;\r\n    }\r\n\r\n    async getProfileImage(): Promise<string> {\r\n        await this.loadProfile();\r\n        return this.user.profileImage;\r\n    }\r\n\r\n    async getContacts(): Promise<User[]> {\r\n        await this.loadProfile();\r\n        return this.contacts;\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  ActivatedRouteSnapshot,\r\n  CanActivate,\r\n  Router,\r\n  RouterStateSnapshot\r\n} from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { map, take, tap } from 'rxjs/operators';\r\n\r\nimport { AuthService } from './solid.auth.service';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(private auth: AuthService, private router: Router) {}\r\n\r\n  canActivate(\r\n    next: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Observable<boolean> | Promise<boolean> | boolean {\r\n    const isLoggedIn = localStorage.getItem('solid-auth-client') ? true : false;\r\n\r\n    if (!isLoggedIn) {\r\n      this.router.navigateByUrl('/login');\r\n    }\r\n\r\n    return /*isLoggedIn; /*/ this.auth.session.pipe(\r\n      take(1),\r\n      map(session => !!session),\r\n      tap(loggedIn => {\r\n        if (!loggedIn) {\r\n          return this.router.navigate(['/']);\r\n        }\r\n      })\r\n    );//*/\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {SolidSession} from '../../models/solid/solid-session.model';\r\n\r\ndeclare let solid: any;\r\ndeclare let $rdf: any;\r\n// import * as $rdf from 'rdflib'\r\n\r\n// TODO: Remove any UI interaction from this service\r\nimport {NgForm} from '@angular/forms';\r\nimport {ToastrService} from 'ngx-toastr';\r\nimport {NamedNode} from 'src/assets/types/rdflib';\r\n\r\nconst VCARD = $rdf.Namespace('http://www.w3.org/2006/vcard/ns#');\r\nconst FOAF = $rdf.Namespace('http://xmlns.com/foaf/0.1/');\r\n\r\n/**\r\n * A service layer for RDF data manipulation using rdflib.js\r\n * @see https://solid.inrupt.com/docs/manipulating-ld-with-rdflib\r\n */\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class RdfService {\r\n\r\n    session: SolidSession;\r\n    store = $rdf.graph();\r\n\r\n    /**\r\n     * A helper object that connects to the web, loads data, and saves it back. More powerful than using a simple\r\n     * store object.\r\n     * When you have a fetcher, then you also can ask the query engine to go fetch new linked data automatically\r\n     * as your query makes its way across the web.\r\n     * @see http://linkeddata.github.io/rdflib.js/doc/Fetcher.html\r\n     */\r\n    fetcher = $rdf.Fetcher;\r\n\r\n    /**\r\n     * The UpdateManager allows you to send small changes to the server to patch the data as your user changes data in\r\n     * real time. It also allows you to subscribe to changes other people make to the same file, keeping track of\r\n     * upstream and downstream changes, and signaling any conflict between them.\r\n     * @see http://linkeddata.github.io/rdflib.js/doc/UpdateManager.html\r\n     */\r\n    updateManager = $rdf.UpdateManager;\r\n\r\n    constructor(private toastr: ToastrService) {\r\n        const fetcherOptions = {};\r\n        this.fetcher = new $rdf.Fetcher(this.store, fetcherOptions);\r\n        this.updateManager = new $rdf.UpdateManager(this.store);\r\n        this.getSession();\r\n    }\r\n\r\n    /**\r\n     * Fetches the session from Solid, and store results in localStorage\r\n     */\r\n    getSession = async () => {\r\n        this.session = await solid.auth.currentSession(localStorage);\r\n    }\r\n\r\n    /**\r\n     * Gets a node that matches the specified pattern using the VCARD onthology\r\n     *\r\n     * any() can take a subject and a predicate to find Any one person identified by the webId\r\n     * that matches against the node/predicated\r\n     *\r\n     * @param {string} node VCARD predicate to apply to the $rdf.any()\r\n     * @param {string?} webId The webId URL (e.g. https://yourpod.solid.community/profile/card#me)\r\n     * @return {string} The value of the fetched node or an emtpty string\r\n     * @see https://github.com/solid/solid-tutorial-rdflib.js\r\n     */\r\n    getValueFromVcard = (node: string, webId?: string): string | any => {\r\n        return this.getValueFromNamespace(node, VCARD, webId);\r\n    }\r\n\r\n    /**\r\n     * Gets a node that matches the specified pattern using the FOAF onthology\r\n     * @param {string} node FOAF predicate to apply to the $rdf.any()\r\n     * @param {string?} webId The webId URL (e.g. https://yourpod.solid.community/profile/card#me)\r\n     * @return {string} The value of the fetched node or an emtpty string\r\n     */\r\n    getValueFromFoaf = (node: string, webId?: string) => {\r\n        return this.getValueFromNamespace(node, FOAF, webId);\r\n    }\r\n\r\n    transformDataForm = (form: NgForm, me: any, doc: any) => {\r\n        const insertions = [];\r\n        const deletions = [];\r\n        const fields = Object.keys(form.value);\r\n        const oldProfileData = JSON.parse(localStorage.getItem('oldProfileData')) || {};\r\n\r\n        // We need to split out into three code paths here:\r\n        // 1. There is an old value and a new value. This is the update path\r\n        // 2. There is no old value and a new value. This is the insert path\r\n        // 3. There is an old value and no new value. Ths is the delete path\r\n        // These are separate codepaths because the system needs to know what to do in each case\r\n        fields.map((field) => {\r\n\r\n            const predicate = VCARD(this.getFieldName(field));\r\n            const subject = this.getUriForField(field, me);\r\n            const why = doc;\r\n\r\n            const fieldValue = this.getFieldValue(form, field);\r\n            const oldFieldValue = this.getOldFieldValue(field, oldProfileData);\r\n\r\n            // if there's no existing home phone number or email address, we need to add one, then add the link for hasTelephone or hasEmail\r\n            if (!oldFieldValue && fieldValue && (field === 'phone' || field === 'email')) {\r\n                this.addNewLinkedField(field, insertions, predicate, fieldValue, why, me);\r\n            } else {\r\n\r\n                // Add a value to be updated\r\n                if (oldProfileData[field] && form.value[field] && !form.controls[field].pristine) {\r\n                    deletions.push($rdf.st(subject, predicate, oldFieldValue, why));\r\n                    insertions.push($rdf.st(subject, predicate, fieldValue, why));\r\n                } else if (oldProfileData[field] && !form.value[field] && !form.controls[field].pristine) {\r\n                    deletions.push($rdf.st(subject, predicate, oldFieldValue, why));\r\n                } else if (!oldProfileData[field] && form.value[field] && !form.controls[field].pristine) {\r\n                    insertions.push($rdf.st(subject, predicate, fieldValue, why));\r\n                }\r\n            }\r\n        });\r\n\r\n        return {\r\n            insertions,\r\n            deletions,\r\n        };\r\n    }\r\n\r\n    private addNewLinkedField(field, insertions, predicate, fieldValue, why, me: any) {\r\n        // Generate a new ID. This id can be anything but needs to be unique.\r\n        const newId = field + ':' + Date.now();\r\n\r\n        // Get a new subject, using the new ID\r\n        const newSubject = $rdf.sym(this.session.webId.split('#')[0] + '#' + newId);\r\n\r\n        // Set new predicate, based on email or phone fields\r\n        const newPredicate = field === 'phone' ? $rdf.sym(VCARD('hasTelephone')) : $rdf.sym(VCARD('hasEmail'));\r\n\r\n        // Add new phone or email to the pod\r\n        insertions.push($rdf.st(newSubject, predicate, fieldValue, why));\r\n\r\n        // Set the type (defaults to Home/Personal for now) and insert it into the pod as well\r\n        // Todo: Make this dynamic\r\n        const type = field === 'phone' ? $rdf.literal('Home') : $rdf.literal('Personal');\r\n        insertions.push($rdf.st(newSubject, VCARD('type'), type, why));\r\n\r\n        // Add a link in #me to the email/phone number (by id)\r\n        insertions.push($rdf.st(me, newPredicate, newSubject, why));\r\n    }\r\n\r\n    private getUriForField(field, me): string {\r\n        let uriString: string;\r\n        let uri: any;\r\n\r\n        switch (field) {\r\n            case 'phone':\r\n                uriString = this.getValueFromVcard('hasTelephone');\r\n                if (uriString) {\r\n                    uri = $rdf.sym(uriString);\r\n                }\r\n                break;\r\n            case 'email':\r\n                uriString = this.getValueFromVcard('hasEmail');\r\n                if (uriString) {\r\n                    uri = $rdf.sym(uriString);\r\n                }\r\n                break;\r\n            default:\r\n                uri = me;\r\n                break;\r\n        }\r\n\r\n        return uri;\r\n    }\r\n\r\n    /**\r\n     * Extracts the value of a field of a NgForm and converts it to a $rdf.NamedNode\r\n     * @param {NgForm} form\r\n     * @param {string} field The name of the field that is going to be extracted from the form\r\n     * @return {RdfNamedNode}\r\n     */\r\n    private getFieldValue(form: NgForm, field: string): any {\r\n        let fieldValue: any;\r\n\r\n        if (!form.value[field]) {\r\n            return;\r\n        }\r\n\r\n        switch (field) {\r\n            case 'phone':\r\n                fieldValue = $rdf.sym('tel:+' + form.value[field]);\r\n                break;\r\n            case 'email':\r\n                fieldValue = $rdf.sym('mailto:' + form.value[field]);\r\n                break;\r\n            default:\r\n                fieldValue = form.value[field];\r\n                break;\r\n        }\r\n\r\n        return fieldValue;\r\n    }\r\n\r\n    private getOldFieldValue(field, oldProfile): any {\r\n        let oldValue: any;\r\n\r\n        if (!oldProfile || !oldProfile[field]) {\r\n            return;\r\n        }\r\n\r\n        switch (field) {\r\n            case 'phone':\r\n                oldValue = $rdf.sym('tel:+' + oldProfile[field]);\r\n                break;\r\n            case 'email':\r\n                oldValue = $rdf.sym('mailto:' + oldProfile[field]);\r\n                break;\r\n            default:\r\n                oldValue = oldProfile[field];\r\n                break;\r\n        }\r\n\r\n        return oldValue;\r\n    }\r\n\r\n    private getFieldName(field): string {\r\n        switch (field) {\r\n            case 'company':\r\n                return 'organization-name';\r\n            case 'phone':\r\n            case 'email':\r\n                return 'value';\r\n            default:\r\n                return field;\r\n        }\r\n    }\r\n\r\n    updateProfile = async (form: NgForm) => {\r\n        const me = $rdf.sym(this.session.webId);\r\n        const doc = $rdf.NamedNode.fromValue(this.session.webId.split('#')[0]);\r\n        const data = this.transformDataForm(form, me, doc);\r\n\r\n        // Update existing values\r\n        if (data.insertions.length > 0 || data.deletions.length > 0) {\r\n            this.updateManager.update(data.deletions, data.insertions, (response, success, message) => {\r\n                if (success) {\r\n                    this.toastr.success('Your Solid profile has been successfully updated', 'Success!');\r\n                    form.form.markAsPristine();\r\n                    form.form.markAsTouched();\r\n                } else {\r\n                    this.toastr.error('Message: ' + message, 'An error has occurred');\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    getAddress = () => {\r\n        const linkedUri = this.getValueFromVcard('hasAddress');\r\n\r\n        if (linkedUri) {\r\n            return {\r\n                locality: this.getValueFromVcard('locality', linkedUri),\r\n                country_name: this.getValueFromVcard('country-name', linkedUri),\r\n                region: this.getValueFromVcard('region', linkedUri),\r\n                street: this.getValueFromVcard('street-address', linkedUri),\r\n            };\r\n        }\r\n\r\n        return {};\r\n    }\r\n\r\n    // Function to get email. This returns only the first email, which is temporary\r\n    getEmail = () => {\r\n        const linkedUri = this.getValueFromVcard('hasEmail');\r\n\r\n        if (linkedUri) {\r\n            return this.getValueFromVcard('value', linkedUri).split('mailto:')[1];\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    // Function to get phone number. This returns only the first phone number, which is temporary. It also ignores the type.\r\n    getPhone = () => {\r\n        const linkedUri = this.getValueFromVcard('hasTelephone');\r\n\r\n        if (linkedUri) {\r\n            return this.getValueFromVcard('value', linkedUri).split('tel:+')[1];\r\n        }\r\n    }\r\n\r\n    getProfile = async () => {\r\n\r\n        if (!this.session) {\r\n            await this.getSession();\r\n        }\r\n        console.log('Wait for it...');\r\n        if (this.session == null) {\r\n            console.log('NULL SESSION!!!');\r\n        }\r\n\r\n        try {\r\n            await this.fetcher.load(this.session.webId);\r\n\r\n            console.log('Profile loaded: ' + this.getValueFromVcard('fn'));\r\n            return {\r\n                fn: this.getValueFromVcard('fn'),\r\n                company: this.getValueFromVcard('organization-name'),\r\n                phone: this.getPhone(),\r\n                role: this.getValueFromVcard('role'),\r\n                image: this.getValueFromVcard('hasPhoto'),\r\n                address: this.getAddress(),\r\n                email: this.getEmail(),\r\n            };\r\n        } catch (error) {\r\n            console.log(`Error fetching data: ${error}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets any resource that matches the node, using the provided Namespace\r\n     * @param {string} node The name of the predicate to be applied using the provided Namespace\r\n     * @param {$rdf.namespace} namespace The RDF Namespace\r\n     * @param {string?} webId The webId URL (e.g. https://yourpod.solid.community/profile/card#me)\r\n     */\r\n    private getValueFromNamespace(node: string, namespace: any, webId?: string): string | any {\r\n        const store = this.store.any($rdf.sym(webId || this.session.webId), namespace(node));\r\n        if (store) {\r\n            return store.value;\r\n        }\r\n        return '';\r\n    }\r\n\r\n    // * * * * * * * * * * * * * * * * * * * * * //\r\n    // Our methods go down here :D\r\n    //\r\n    //  |   |   |   |   |   |   |\r\n    //  v   v   v   v   v   v   v\r\n\r\n    async getContacts(): Promise<NamedNode[]> {\r\n        // if (!this.session) {\r\n        //  await this.getSession();\r\n        // }\r\n        const webId = this.session.webId;\r\n        try {\r\n            await this.fetcher.load(this.store.sym(webId).doc());\r\n            return this.store.each(this.store.sym(webId), FOAF('knows'));\r\n        } catch (error) {\r\n            console.log(`Error fetching contacts data: ${error}`);\r\n        }\r\n    }\r\n\r\n    getWebID() {\r\n        return this.session.webId;\r\n    }\r\n\r\n    getUserName() {\r\n        return this.getValueFromVcard('fn');\r\n    }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Observable, from } from 'rxjs';\r\nimport { RdfService } from './rdf.service';\r\nimport { SolidProvider } from '../../models/solid/solid-provider.model';\r\ndeclare let solid: any;\r\n\r\ninterface SolidSession {\r\n  accessToken: string;\r\n  clientId: string;\r\n  idToken: string;\r\n  sessionKey: string;\r\n  webId: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthService {\r\n  session: Observable<SolidSession>;\r\n  fechInit = {\r\n    method: 'PATCH',\r\n    headers: {\r\n      'Content-Type': 'application/sparql-update',\r\n    },\r\n    body: '',\r\n  };\r\n\r\n  constructor(private router: Router, private rdf: RdfService) {\r\n    this.isSessionActive();\r\n  }\r\n\r\n  /*\r\n   * This will check if current session is active to avoid security problems\r\n  */\r\n  isSessionActive = async () => {\r\n    this.session = from(solid.auth.currentSession());\r\n  }\r\n\r\n  /**\r\n   * Alternative login-popup function. This will open a popup that will allow you to choose an identity provider\r\n   * without leaving the current page\r\n   * This is recommended if you don't want to leave the current workflow.\r\n   */\r\n  solidLoginPopup = async () => {\r\n    try {\r\n      await solid.auth.popupLogin({ popupUri: './login-popup'});\r\n      // Check if session is valid to avoid redirect issues\r\n      await this.isSessionActive();\r\n\r\n      // popupLogin success redirect to profile\r\n      this.router.navigate(['/chat']);\r\n    } catch (error) {\r\n      console.log(`Error: ${error}`);\r\n    }\r\n  }\r\n\r\n  /*\r\n  * Signs out of Solid in this app, by calling the logout function and clearing the localStorage token\r\n  */\r\n  solidSignOut = async () => {\r\n    try {\r\n      await solid.auth.logout();\r\n      // Remove localStorage\r\n      localStorage.removeItem('solid-auth-client');\r\n      // Redirect to login page\r\n      this.router.navigate(['/']);\r\n    } catch (error) {\r\n      console.log(`Error: ${error}`);\r\n    }\r\n  }\r\n\r\n  saveOldUserData = (profile: any) => {\r\n    if (!localStorage.getItem('oldProfileData')) {\r\n      localStorage.setItem('oldProfileData', JSON.stringify(profile));\r\n    }\r\n  }\r\n\r\n  getOldUserData = () => {\r\n    return JSON.parse(localStorage.getItem('oldProfileData'));\r\n  }\r\n\r\n  /*\r\n  *  Make a call to the solid auth endpoint. It requires an identity provider url, which here is coming from the dropdown, which\r\n  *  is populated by the getIdentityProviders() function call. It currently requires a callback url and a storage option or else\r\n  *  the call will fail.\r\n  */\r\n  solidLogin = async (idp: string) => {\r\n    await solid.auth.login(idp, {\r\n      callbackUri: `${window.location.href}`,\r\n      storage: localStorage,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Function to get providers. This is to mimic the future provider registry\r\n   *\r\n   * @return {SolidProvider[]} A list of SolidProviders\r\n   */\r\n  getIdentityProviders(): SolidProvider[] {\r\n    const inruptProvider: SolidProvider = {\r\n      name: 'Inrupt',\r\n      image: '/assets/images/Inrupt.png',\r\n      loginUrl: 'https://inrupt.net/auth',\r\n      desc: 'Inrupt Inc. provider'\r\n    };\r\n    const solidCommunityProvider: SolidProvider = {\r\n      name: 'Solid Community',\r\n      image: '/assets/images/Solid.png',\r\n      loginUrl: 'https://solid.community',\r\n      desc: 'A provider maintained by the Solid Community'\r\n    };\r\n    const otherProvider: SolidProvider = {\r\n      name: 'Other (Enter WebID)',\r\n      image: '/assets/images/Generic.png',\r\n      loginUrl: null,\r\n      desc: 'Generic provider'\r\n    };\r\n\r\n    return [\r\n      inruptProvider,\r\n      solidCommunityProvider,\r\n      otherProvider\r\n    ];\r\n  }\r\n}\r\n","module.exports = \".chatItem{\\r\\n    height: auto;\\r\\n    padding: 10px;\\r\\n    width: 90%;\\r\\n    margin-top: 10px;\\r\\n    border-radius: 1px;\\r\\n    align-items:flex-start;\\r\\n    background-color: #201835;\\r\\n    box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\\r\\n    color: #A098A5;\\r\\n    border-radius: 8px;\\r\\n    transition: ease-in 0.2s;\\r\\n}\\r\\n\\r\\n.activeChatItem {\\r\\n    background-color: #483b6d;\\r\\n    color: rgb(199, 192, 204);\\r\\n}\\r\\n\\r\\n.chatItem:hover{\\r\\n    background-color: #5a4b88;\\r\\n    color: #ddd;\\r\\n    transition: ease-in 0.1s;\\r\\n}\\r\\n\\r\\n.userName{\\r\\n    display: inline-block;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc2lkZWJhckNvbXBvbmVudHMvY2hhdC1pdGVtL2NoYXQtaXRlbS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksWUFBWTtJQUNaLGFBQWE7SUFDYixVQUFVO0lBQ1YsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtJQUNsQixzQkFBc0I7SUFDdEIseUJBQXlCO0lBQ3pCLGtFQUFrRTtJQUNsRSxjQUFjO0lBQ2Qsa0JBQWtCO0lBQ2xCLHdCQUF3QjtBQUM1Qjs7QUFFQTtJQUNJLHlCQUF5QjtJQUN6Qix5QkFBeUI7QUFDN0I7O0FBRUE7SUFDSSx5QkFBeUI7SUFDekIsV0FBVztJQUNYLHdCQUF3QjtBQUM1Qjs7QUFFQTtJQUNJLHFCQUFxQjtBQUN6QiIsImZpbGUiOiJzcmMvYXBwL3NpZGViYXJDb21wb25lbnRzL2NoYXQtaXRlbS9jaGF0LWl0ZW0uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jaGF0SXRlbXtcclxuICAgIGhlaWdodDogYXV0bztcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICB3aWR0aDogOTAlO1xyXG4gICAgbWFyZ2luLXRvcDogMTBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDFweDtcclxuICAgIGFsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjAxODM1O1xyXG4gICAgYm94LXNoYWRvdzogMCAzcHggNnB4IHJnYmEoMCwwLDAsMC4xNiksIDAgM3B4IDZweCByZ2JhKDAsMCwwLDAuMjMpO1xyXG4gICAgY29sb3I6ICNBMDk4QTU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XHJcbiAgICB0cmFuc2l0aW9uOiBlYXNlLWluIDAuMnM7XHJcbn1cclxuXHJcbi5hY3RpdmVDaGF0SXRlbSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDgzYjZkO1xyXG4gICAgY29sb3I6IHJnYigxOTksIDE5MiwgMjA0KTtcclxufVxyXG5cclxuLmNoYXRJdGVtOmhvdmVye1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzVhNGI4ODtcclxuICAgIGNvbG9yOiAjZGRkO1xyXG4gICAgdHJhbnNpdGlvbjogZWFzZS1pbiAwLjFzO1xyXG59XHJcblxyXG4udXNlck5hbWV7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbn0iXX0= */\"","module.exports = \"<div class=\\\"chatItem\\\" [ngClass]=(isActive()) (click)=\\\"openChat()\\\">\\r\\n    \\r\\n\\r\\n      <span class=\\\"userName\\\" *ngIf=\\\"chatInfo != undefined\\\">\\r\\n        {{ chatInfo.chatName }}\\r\\n      </span>\\r\\n\\r\\n</div>\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { ChatInfo } from 'src/app/models/dechat/chat-info.model';\r\nimport { ChatService } from 'src/app/services/dechat/chat.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-chat-item',\r\n  templateUrl: './chat-item.component.html',\r\n  styleUrls: ['./chat-item.component.css']\r\n})\r\nexport class ChatItemComponent implements OnInit {\r\n\r\n  @Input() chatInfo: ChatInfo;\r\n  \r\n  constructor(private chatService: ChatService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  isActive() {\r\n    if (this.chatService.currentChat == this.chatInfo)\r\n      return \"activeChatItem\";\r\n    return \"chatItem\";\r\n  }\r\n\r\n  openChat() {\r\n    console.log(\"Oppening chat with \" + this.chatInfo.chatName);\r\n    this.chatService.openChat(this.chatInfo);\r\n  }\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3NpZGViYXJDb21wb25lbnRzL2NoYXQtbGlzdC9jaGF0LWxpc3QuY29tcG9uZW50LmNzcyJ9 */\"","module.exports = \"<div class=\\\"userList\\\">\\r\\n\\r\\n  <div class=\\\"newChatWrapper\\\">\\r\\n    <span>New chat</span>\\r\\n    <button class=\\\"newChatButton\\\" (click)=\\\"newChat()\\\">+</button>\\r\\n  </div>\\r\\n\\r\\n  <span *ngIf=\\\"(chatInfos|async).length > 0\\\">\\r\\n    <app-chat-item\\r\\n    [chatInfo]=chatInfo *ngFor=\\\"let chatInfo of chatInfos | async\\\">\\r\\n    </app-chat-item>\\r\\n  </span>\\r\\n</div>\"","import { Component, OnInit, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { ChatService } from '../../services/dechat/chat.service';\r\nimport { ChatInfo } from 'src/app/models/dechat/chat-info.model';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { MatDialog, MatDialogConfig } from \"@angular/material\";\r\nimport { NewChatDialogComponent } from 'src/app/dialogComponents/new-chat-dialog/new-chat-dialog.component';\r\n\r\n\r\n@Component({\r\n  selector: 'app-chat-list',\r\n  templateUrl: './chat-list.component.html',\r\n  styleUrls: ['./chat-list.component.css']\r\n})\r\nexport class ChatListComponent implements OnInit, OnChanges {\r\n  \r\n  chatInfos: Observable<ChatInfo[]>;\r\n\r\n  constructor(\r\n    private chatService: ChatService,\r\n    private dialog: MatDialog\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.update();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.update();\r\n  }\r\n\r\n  \r\n  update() : void {\r\n    this.chatInfos = this.chatService.getAllChats();\r\n  }\r\n\r\n  newChat() {\r\n    // TODO\r\n    // open a dialog to create a new chat\r\n    var dialogConfig = new MatDialogConfig();\r\n    dialogConfig.disableClose = true;\r\n    dialogConfig.autoFocus = true;\r\n\r\n    var dialogRef = this.dialog.open(NewChatDialogComponent, dialogConfig);\r\n    \r\n  }\r\n\r\n\r\n}\r\n","module.exports = \"\\r\\n.profileIcon {\\r\\n    display: grid;\\r\\n    grid-template-columns: 60% 40%;\\r\\n}\\r\\n\\r\\n.textWrapper {\\r\\n    padding: 15% 10%;\\r\\n}\\r\\n\\r\\n.imgWrapper {\\r\\n    display: inline-block;\\r\\n    width: 64px;\\r\\n    height: 64px;\\r\\n    min-width: 64px;\\r\\n}\\r\\n\\r\\n.imgWrapper img {\\r\\n    width: 100%;\\r\\n    border-radius: 50%;\\r\\n    border-width: 2px;\\r\\n    border-style: solid;\\r\\n    border-color: rgb(90, 90, 90);\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdXRpbENvbXBvbmVudHMvcHJvZmlsZS1pY29uL3Byb2ZpbGUtaWNvbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTtJQUNJLGFBQWE7SUFDYiw4QkFBOEI7QUFDbEM7O0FBRUE7SUFDSSxnQkFBZ0I7QUFDcEI7O0FBRUE7SUFDSSxxQkFBcUI7SUFDckIsV0FBVztJQUNYLFlBQVk7SUFDWixlQUFlO0FBQ25COztBQUVBO0lBQ0ksV0FBVztJQUNYLGtCQUFrQjtJQUNsQixpQkFBaUI7SUFDakIsbUJBQW1CO0lBQ25CLDZCQUE2QjtBQUNqQyIsImZpbGUiOiJzcmMvYXBwL3V0aWxDb21wb25lbnRzL3Byb2ZpbGUtaWNvbi9wcm9maWxlLWljb24uY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4ucHJvZmlsZUljb24ge1xyXG4gICAgZGlzcGxheTogZ3JpZDtcclxuICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNjAlIDQwJTtcclxufVxyXG5cclxuLnRleHRXcmFwcGVyIHtcclxuICAgIHBhZGRpbmc6IDE1JSAxMCU7XHJcbn1cclxuXHJcbi5pbWdXcmFwcGVyIHtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIHdpZHRoOiA2NHB4O1xyXG4gICAgaGVpZ2h0OiA2NHB4O1xyXG4gICAgbWluLXdpZHRoOiA2NHB4O1xyXG59XHJcblxyXG4uaW1nV3JhcHBlciBpbWcge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICBib3JkZXItd2lkdGg6IDJweDtcclxuICAgIGJvcmRlci1zdHlsZTogc29saWQ7XHJcbiAgICBib3JkZXItY29sb3I6IHJnYig5MCwgOTAsIDkwKTtcclxufVxyXG4iXX0= */\"","module.exports = \"<div class=\\\"profileIcon\\\">\\r\\n\\r\\n  <div class=\\\"textWrapper\\\">\\r\\n    Hello, {{ userName }}\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"imgWrapper\\\">\\r\\n    <img [src]=\\\"profileImage\\\" />\\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\"","import {Component, OnInit} from '@angular/core';\r\nimport {UserService} from '../../services/dechat/user.service';\r\n\r\n@Component({\r\n    selector: 'app-profile-icon',\r\n    templateUrl: './profile-icon.component.html',\r\n    styleUrls: ['./profile-icon.component.css']\r\n})\r\nexport class ProfileIconComponent implements OnInit {\r\n\r\n    userName: string;\r\n    profileImage: string;\r\n\r\n    constructor(private user: UserService) {\r\n        this.profileImage = '/assets/images/profile.png';\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.loadProfile();\r\n    }\r\n\r\n    async loadProfile() {\r\n        this.userName = await this.user.getUserName();\r\n        this.profileImage = await this.user.getProfileImage();\r\n    }\r\n\r\n}\r\n","module.exports = \"\\r\\n\\r\\n.userDisplaySlot {\\r\\n    cursor: pointer;\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdXRpbENvbXBvbmVudHMvdXNlci1kaXNwbGF5LXNsb3QvdXNlci1kaXNwbGF5LXNsb3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBO0lBQ0ksZUFBZTtJQUNmLHFCQUFxQjtBQUN6QiIsImZpbGUiOiJzcmMvYXBwL3V0aWxDb21wb25lbnRzL3VzZXItZGlzcGxheS1zbG90L3VzZXItZGlzcGxheS1zbG90LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbi51c2VyRGlzcGxheVNsb3Qge1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG59XHJcbiJdfQ== */\"","module.exports = \"<span class=\\\"userDisplaySlot\\\">\\r\\n  <p>User: {{ userName }}</p>\\r\\n</span>\\r\\n\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { User } from 'src/app/models/dechat/user.model';\r\n\r\n@Component({\r\n  selector: 'app-user-display-slot',\r\n  templateUrl: './user-display-slot.component.html',\r\n  styleUrls: ['./user-display-slot.component.css']\r\n})\r\nexport class UserDisplaySlotComponent implements OnInit {\r\n\r\n  @Input() user: User;\r\n\r\n  userName : string;\r\n  // TODO picture\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(user = this.user) {\r\n    this.userName = user.nickname;\r\n  }\r\n\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * In development mode, to ignore zone related error stack frames such as\r\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\r\n * import the following file, but please comment it out in production mode\r\n * because it will have performance impact when throw error\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n"],"sourceRoot":""}